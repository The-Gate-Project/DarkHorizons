BACKUP ~DarkHorizons/backup~
AUTHOR ~"http://www.teambg.net"~

VERSION ~3.02~

README ~DarkHorizons/readme-dh.htm~

// Game platform check
ALWAYS

ACTION_IF GAME_IS ~bgee~ THEN BEGIN
  /*Tell the player it is using BG:EE stuff */
  PRINT @890 /* BG:EE install detected */
  INCLUDE ~%MOD_FOLDER%/lib/tbgcom_bgee_vars.tpa~
  INCLUDE ~%MOD_FOLDER%/lib/g3_bgee_cpmvars.tpa~
END ELSE
ACTION_IF GAME_IS ~eet~ THEN BEGIN
  /*Tell the player it is using EET stuff */
  PRINT @895 /* EET install detected */
  INCLUDE ~%MOD_FOLDER%/lib/tbgcom_eet_vars.tpa~
  INCLUDE ~eet/other/cpmvars/eet_cpmvars.tpa~
END ELSE
ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN
  /* Tell the player it is using Tutu stuff */
  PRINT @891 /* Tutu install detected. */
  INCLUDE ~%MOD_FOLDER%/lib/tbgcom_tutu_vars.tpa~
  INCLUDE ~%MOD_FOLDER%/lib/g3_tutu_cpmvars.tpa~
END ELSE
ACTION_IF GAME_IS ~totsc~ THEN BEGIN
  /* Tell the player it is using BG1 stuff */
  PRINT @894
  INCLUDE ~%MOD_FOLDER%/lib/tbgcom_bg_vars.tpa~
  INCLUDE ~%MOD_FOLDER%/lib/g3_bg_cpmvars.tpa~
END ELSE
ACTION_IF GAME_IS ~bgt~ THEN BEGIN
  /* Tell the player it is using BGT stuff */
  PRINT @892 /* BGT install detected. */
  INCLUDE ~%MOD_FOLDER%/lib/tbgcom_bgt_vars.tpa~
  INCLUDE ~%MOD_FOLDER%/lib/g3_bgt_cpmvars.tpa~
END ELSE BEGIN
  /* Tell the player it is not Tutu or BGT */
  FAIL @893 /* Please install on BG:EE, Tutu or BGT. */
END

ACTION_IF GAME_IS ~bgee eet~ BEGIN
  COPY - ~weidu.conf~ ~.../weidu.conf~
    READ_2DA_ENTRY 0 2 3 "lang_dir"

    ACTION_DEFINE_ASSOCIATIVE_ARRAY charsetsTable BEGIN
      "german" => "CP1252"
      "english" => "CP1252"
      "french" => "CP1252"
      "italian" => "CP1252"
      "polish" => "CP1250"
      "russian" => "CP1251"
      "spanish" => "CP1252"
      "schinese" => "GB2312"
    END
    ACTION_DEFINE_ARRAY charsetsReloadArray BEGIN setup END
    ACTION_DEFINE_ARRAY charsetsNoConvertArray BEGIN setup-ee install END

    LAF ~HANDLE_CHARSETS~
      INT_VAR
        infer_charsets = 0
      STR_VAR
        tra_path = "DarkHorizons/language"
        iconv_path = "DarkHorizons/Language/iconv" // available as part of the base system on OS X and GNU/Linux
        charset_table = charsetsTable
        reload_array = charsetsReloadArray
        noconvert_array = charsetsNoConvertArray
    END

	  LOAD_TRA ~DarkHorizons/language/%LANGUAGE%/setup-ee.tra~
	END
END

AUTO_TRA ~DarkHorizons/Language/%s/D~

LANGUAGE ~English~
         ~english~
         ~DarkHorizons/Language/english/setup.tra~

LANGUAGE ~Italian~
         ~italian~
         ~DarkHorizons/Language/Italian/setup.tra~

LANGUAGE ~German~
         ~german~
         ~DarkHorizons/Language/German/setup.tra~

LANGUAGE ~Russian~
         ~russian~
         ~DarkHorizons/Language/Russian/setup.tra~

LANGUAGE ~Polish~
         ~polish~
         ~DarkHorizons/Language/polish/setup.tra~

LANGUAGE ~Francais (traduit par Sanctifer des d'Oghmatiques)~
         ~french~
         ~DarkHorizons/Language/french/setup.tra~

LANGUAGE ~Spanish~
         ~spanish~
         ~DarkHorizons/Language/spanish/setup.tra~

LANGUAGE ~Simplified Chinese (Latest Chinese accent by YouYe)~
         ~Schinese~
         ~DarkHorizons/Language/Schinese/setup.tra~
         ~DarkHorizons/Language/Schinese/install.tra~



BEGIN @0
DESIGNATED 0
LABEL ~TeamBG_CoM_Solaufein-DarkHorizons~

PRINT @1
PRINT @2
PRINT @3
PRINT @4
PRINT @5
PRINT @6
PRINT @7
PRINT @8


COPY ~DarkHorizons/bams~ ~override~

ACTION_IF GAME_IS ~totsc~ THEN BEGIN
  COPY ~%MOD_FOLDER%/bams/bg~ ~override~
END

ACTION_IF GAME_IS ~bgee~ THEN BEGIN
  ACTION_IF GAME_INCLUDES ~sod~ THEN BEGIN
    COPY ~%MOD_FOLDER%/bams/sod~ ~override~
  END ELSE BEGIN
    COPY ~%MOD_FOLDER%/bams/bgee~ ~override~
  END
END

COPY ~DarkHorizons\images~ ~override~


// Copy all English sounds first
COPY ~%MOD_FOLDER%/sounds~ ~override~

// Overwrite with localized sounds
ACTION_IF (DIRECTORY_EXISTS EVAL ~%MOD_FOLDER%/Language/%LANGUAGE%/sounds~) THEN BEGIN
  COPY ~%MOD_FOLDER%/Language/%LANGUAGE%/sounds~ ~override~
END

/* New and altered areas */
//COPY ~DarkHorizons\areas~ ~override~
COPY ~DarkHorizons\areas\CM0750.are~ ~override~
  REPLACE_TEXTUALLY ~FW0700~ ~%AR2%~
COPY ~DarkHorizons\areas\CM0750.BCS~ ~override~
COPY ~DarkHorizons\areas\CM0750.mos~ ~override~
COPY ~DarkHorizons\areas\CM0750.tis~ ~override~
COPY ~DarkHorizons\areas\CM0750.wed~ ~override~
COPY ~DarkHorizons\areas\CM0750HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0750LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0750SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0751.are~ ~override~
COPY ~DarkHorizons\areas\CM0751.mos~ ~override~
COPY ~DarkHorizons\areas\CM0751.tis~ ~override~
COPY ~DarkHorizons\areas\CM0751.wed~ ~override~
COPY ~DarkHorizons\areas\CM0751HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0751LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0751SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0752.are~ ~override~
COPY ~DarkHorizons\areas\CM0752.mos~ ~override~
COPY ~DarkHorizons\areas\CM0752.tis~ ~override~
COPY ~DarkHorizons\areas\CM0752.wed~ ~override~
COPY ~DarkHorizons\areas\CM0752HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0752LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0752SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0753.are~ ~override~
COPY ~DarkHorizons\areas\CM0753.mos~ ~override~
COPY ~DarkHorizons\areas\CM0753.tis~ ~override~
COPY ~DarkHorizons\areas\CM0753.wed~ ~override~
COPY ~DarkHorizons\areas\CM0753HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0753LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM0753SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM2680.are~ ~override~
	READ_LONG  0x54  "actors_offset"
 	READ_SHORT 0x58  "actors_num"
REPLACE_TEXTUALLY ~AMB_M35B~ ~%SND1%~ (8)
REPLACE_TEXTUALLY ~AMB_M35D~ ~%SND2%~ (8)
REPLACE_TEXTUALLY ~AMB_E29A~ ~%SND3%~ (8)
PATCH_IF GAME_IS ~Tutu_totsc~ THEN BEGIN
REPLACE_TEXTUALLY ~AR3901~ ~%AR3%~ (8)
 	FOR( cnt=0; cnt<"%actors_num%"; cnt=cnt+1 ) BEGIN  //actors loop
   READ_ASCII ("%actors_offset%"+0x110*cnt+0x80)       "actor_name" (8)
   PATCH_IF ("%actor_name%" STRING_EQUAL "SKELET03") THEN BEGIN
		SET offset = ("%actors_offset%"+0x110*cnt)
 		WRITE_ASCII (offset+0x80) ~_KELET03~ (9)
   END
  END
  FOR( cnt=0; cnt<"%actors_num%"; cnt=cnt+1 ) BEGIN  //actors loop
  READ_ASCII ("%actors_offset%"+0x110*cnt+0x80)       "actor_name" (5)
   PATCH_IF ("%actor_name%" STRING_EQUAL "GHOUL") THEN BEGIN
		SET offset = ("%actors_offset%"+0x110*cnt)
 		WRITE_ASCII (offset+0x80) ~_Ghoul~ (6)
   END
   END
FOR( cnt=0; cnt<"%actors_num%"; cnt=cnt+1 ) BEGIN  //actors loop
  READ_ASCII ("%actors_offset%"+0x110*cnt+0x80)       "actor_name" (5)
   PATCH_IF ("%actor_name%" STRING_EQUAL "GHAST") THEN BEGIN
		SET offset = ("%actors_offset%"+0x110*cnt)
 		WRITE_ASCII (offset+0x80) ~_Ghast~ (6)
   END
   END
FOR( cnt=0; cnt<"%actors_num%"; cnt=cnt+1 ) BEGIN  //actors loop
  READ_ASCII ("%actors_offset%"+0x110*cnt+0x80)       "actor_name" (6)
   PATCH_IF ("%actor_name%" STRING_EQUAL "HELMHO") THEN BEGIN
		SET offset = ("%actors_offset%"+0x110*cnt)
 		WRITE_ASCII (offset+0x80) ~_Helmho~ (7)
   END
   END
FOR( cnt=0; cnt<"%actors_num%"; cnt=cnt+1 ) BEGIN  //actors loop
  READ_ASCII ("%actors_offset%"+0x110*cnt+0x80)       "actor_name" (8)
   PATCH_IF ("%actor_name%" STRING_EQUAL "SKELET_A") THEN BEGIN
		SET offset = ("%actors_offset%"+0x110*cnt)
 		WRITE_ASCII (offset+0x80) ~_kelet_a~ (8)
   END
   END
REPLACE_TEXTUALLY ~SKELET_C~ ~_KELET_C~ (8)
REPLACE_TEXTUALLY ~Dopple~ ~_Dopple~ (8)
END ELSE BEGIN
  REPLACE_TEXTUALLY ~AR3901~ ~%AR3%~ (8)
END

COPY ~DarkHorizons\areas\CM2680.mos~ ~override~
COPY ~DarkHorizons\areas\CM2680.tis~ ~override~
COPY ~DarkHorizons\areas\CM2680.wed~ ~override~
COPY ~DarkHorizons\areas\CM2680HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM2680LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM2680SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM2681.are~ ~override~
REPLACE_TEXTUALLY ~AMB_M35B~ ~%SND1%~ (8)
REPLACE_TEXTUALLY ~AMB_M35D~ ~%SND2%~ (8)
REPLACE_TEXTUALLY ~AMB_E29A~ ~%SND3%~ (8)
PATCH_IF GAME_IS ~Tutu_totsc~ THEN BEGIN
REPLACE_TEXTUALLY ~Ghast~ ~_ghast~ (8)
FOR( cnt=0; cnt<"%actors_num%"; cnt=cnt+1 ) BEGIN  //actors loop
  READ_ASCII ("%actors_offset%"+0x110*cnt+0x80)       "actor_name" (6)
   PATCH_IF ("%actor_name%" STRING_EQUAL "_GHAST") THEN BEGIN
		SET offset = ("%actors_offset%"+0x110*cnt)
 		WRITE_ASCII offset ~GHAST~ (8)
   END
   END
   FOR( cnt=0; cnt<"%actors_num%"; cnt=cnt+1 ) BEGIN  //actors loop
  READ_ASCII ("%actors_offset%"+0x110*cnt+0x80)       "actor_name" (8)
   PATCH_IF ("%actor_name%" STRING_EQUAL "SKELET_C") THEN BEGIN
		SET offset = ("%actors_offset%"+0x110*cnt)
 		WRITE_ASCII (offset+0x80) ~_kelet_c~ (8)
   END
   END
END
COPY ~DarkHorizons\areas\CM2681.mos~ ~override~
COPY ~DarkHorizons\areas\CM2681.tis~ ~override~
COPY ~DarkHorizons\areas\CM2681.wed~ ~override~
COPY ~DarkHorizons\areas\CM2681HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM2681LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM2681SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3370.are~ ~override~
REPLACE_TEXTUALLY ~AMB_E15A~ ~%SND4%~ (8)
REPLACE_TEXTUALLY ~AMB_E15B~ ~%SND5%~ (8)
REPLACE_TEXTUALLY ~AMB_E15C~ ~%SND6%~ (8)
REPLACE_TEXTUALLY ~AMB_E15D~ ~%SND7%~ (8)
REPLACE_TEXTUALLY ~AMB_S05A~ ~%SND8%~ (8)
PATCH_IF GAME_IS ~Tutu_totsc~ THEN BEGIN
  REPLACE_TEXTUALLY ~AR3302~ ~%AR1%~
  REPLACE_TEXTUALLY ~Ghast~ ~_ghast~ (8)
  REPLACE_TEXTUALLY ~Skelet_a~ ~_kelet_a~ (8)
  REPLACE_TEXTUALLY ~SCRL1R~ ~_SCRL1R~ (8)
END ELSE BEGIN
  REPLACE_TEXTUALLY ~AR3302~ ~%AR1%~
END
COPY ~DarkHorizons\areas\CM3370.tis~ ~override~
COPY ~DarkHorizons\areas\CM3370.wed~ ~override~
COPY ~DarkHorizons\areas\CM3370.mos~ ~override~
COPY ~DarkHorizons\areas\CM3370HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3370LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3370SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3371.are~ ~override~
COPY ~DarkHorizons\areas\CM3371.mos~ ~override~
COPY ~DarkHorizons\areas\CM3371.tis~ ~override~
COPY ~DarkHorizons\areas\CM3371.wed~ ~override~
COPY ~DarkHorizons\areas\CM3371HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3371LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3371SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3372.are~ ~override~
  REPLACE_TEXTUALLY ~AMB_E17B~ ~%SND9%~ (8)

COPY ~DarkHorizons\areas\CM3372.mos~ ~override~
COPY ~DarkHorizons\areas\CM3372.tis~ ~override~
COPY ~DarkHorizons\areas\CM3372.wed~ ~override~
COPY ~DarkHorizons\areas\CM3372HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3372LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3372SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3373.are~ ~override~
  REPLACE_TEXTUALLY ~AMB_E29A~ ~%SND3%~ (8)

COPY ~DarkHorizons\areas\CM3373.mos~ ~override~
COPY ~DarkHorizons\areas\CM3373.tis~ ~override~
COPY ~DarkHorizons\areas\CM3373.wed~ ~override~
COPY ~DarkHorizons\areas\CM3373HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3373LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3373SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3374.are~ ~override~

COPY ~DarkHorizons\areas\CM3374.mos~ ~override~
COPY ~DarkHorizons\areas\CM3374.tis~ ~override~
COPY ~DarkHorizons\areas\CM3374.wed~ ~override~
COPY ~DarkHorizons\areas\CM3374HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3374LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3374SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3375.are~ ~override~
COPY ~DarkHorizons\areas\CM3375.mos~ ~override~
COPY ~DarkHorizons\areas\CM3375.tis~ ~override~
COPY ~DarkHorizons\areas\CM3375.wed~ ~override~
COPY ~DarkHorizons\areas\CM3375HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3375LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3375SR.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3376.are~ ~override~
  REPLACE_TEXTUALLY ~AMB_E14B~ ~%SND10%~ (8)
COPY ~DarkHorizons\areas\CM3376.mos~ ~override~
COPY ~DarkHorizons\areas\CM3376.tis~ ~override~
COPY ~DarkHorizons\areas\CM3376.wed~ ~override~
COPY ~DarkHorizons\areas\CM3376HT.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3376LM.bmp~ ~override~
COPY ~DarkHorizons\areas\CM3376SR.bmp~ ~override~
COPY_EXISTING ~%AR1%.are~ ~override~
 READ_LONG  0x54  "actors_offset"
 READ_SHORT 0x58  "actors_num"
 READ_SHORT 0x5a  "infotrig_num"
 READ_LONG  0x5c  "infotrig_offset"
 READ_LONG  0x60  "spawns_offset"
 READ_LONG  0x64  "spawns_num"
 READ_LONG  0x68  "entrances_offset"
 READ_LONG  0x6c  "entrances_num"
 READ_LONG  0x70  "cont_offset"
 READ_SHORT 0x74  "cont_num"
 READ_SHORT 0x76  "items_num"
 READ_LONG  0x78  "items_offset"
 READ_LONG  0x7c  "vert_offset"
 READ_SHORT 0x80  "vert_num"
 READ_SHORT 0x82  "amb_num"
 READ_LONG  0x84  "amb_offset"
 READ_LONG  0x88  "vars_offset"
 READ_LONG  0x8c  "vars_num"
 READ_LONG  0xa0  "expbmp_offset"
 READ_LONG  0xa4  "doors_num"
 READ_LONG  0xa8  "doors_offset"
 READ_LONG  0xac  "anim_num"
 READ_LONG  0xb0  "anim_offset"
 READ_LONG  0xb4  "tiled_num"
 READ_LONG  0xb8  "tiled_offset"
 READ_LONG  0xbc  "songs_offset"
 READ_LONG  0xc0  "rest_spawns_offset"
 READ_LONG  0xc4  "automap_offset"
 READ_LONG  0xc8  "automap_num"
 READ_LONG	0xcc	"projectile_traps_offset"
 READ_LONG	0xd0	"projectile_traps_num"


 SET info_1=1
 FOR( cnt=0; cnt<"%infotrig_num%"; cnt=cnt+1 ) BEGIN
   READ_ASCII ("%infotrig_offset%"+0xc4*cnt)       "info_name"
   PATCH_IF (("%info_name%" STRING_COMPARE_CASE "Door3302")=0) BEGIN
     info_1=0
   END
 END

 PATCH_IF (info_1=1) BEGIN       //Add the Info/Travel Triggers
   SET offset = ("%infotrig_offset%"+0xc4*"%infotrig_num%")
   INSERT_BYTES offset 0xc4
   WRITE_ASCII offset ~Door3302~					//Name
   WRITE_SHORT (offset+0x20) 2            //Type of point (2 = Travel Trigger)
   WRITE_SHORT (offset+0x22) 311         //Bounding box left
   WRITE_SHORT (offset+0x24) 483         //Bounding box top
   WRITE_SHORT (offset+0x26) 429         //Bounding box right
   WRITE_SHORT (offset+0x28) 566         //Bounding box bottom
   WRITE_SHORT (offset+0x2a) 6            //# vertices
   WRITE_LONG  (offset+0x2c) "%vert_num%" //first vertex index
   WRITE_LONG  (offset+0x34) 28           //cursor rame number
   WRITE_ASCII (offset+0x38) ~CM3370~			//Destination area
   WRITE_ASCII (offset+0x40) ~Exit3302~		//Entrance name
   WRITE_LONG  (offset+0x60) 04						//Flag (04 = Party Required)
   WRITE_LONG  (offset+0x64) ~-1~					//Infopointtext (-1 = No such index)
   WRITE_SHORT (offset+0x6c) 0            //Trapped (0 = No)
   WRITE_SHORT (offset+0x70) 370         //Trap location X
   WRITE_SHORT (offset+0x72) 524         //Trap location Y
   WRITE_ASCII (offset+0x7c) ~~   			//script (none)
   SET "infotrig_num"="%infotrig_num%"+1
   WRITE_SHORT 0x5a  "%infotrig_num%"

   SET "info_ext"=0xc4

   PATCH_IF ("%actors_offset%">"%infotrig_offset%")
   OR (("%actors_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%infotrig_offset%")
   OR (("%spawns_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%infotrig_offset%")
   OR (("%entrances_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%infotrig_offset%")
   OR (("%cont_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%infotrig_offset%")
   OR (("%items_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%vert_offset%">"%infotrig_offset%")
   OR (("%vert_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%amb_offset%">"%infotrig_offset%")
   OR (("%amb_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%infotrig_offset%")
   OR (("%vars_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%infotrig_offset%")
   OR (("%expbmp_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%infotrig_offset%")
   OR (("%doors_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%infotrig_offset%")
   OR (("%anim_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%infotrig_offset%")
   OR (("%tiled_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%infotrig_offset%")
   OR (("%songs_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%infotrig_offset%")
   OR (("%rest_spawns_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%infotrig_offset%")
   OR (("%automap_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%infotrig_offset%")
   OR (("%projectile_traps_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END






   SET offset = ("%cont_offset%"+0xc0*"%cont_num%")  //adding 1 new container
   INSERT_BYTES offset 0xc0
	 WRITE_ASCII offset ~Container 3~
   WRITE_SHORT (offset+0x20) 495           //location X
   WRITE_SHORT (offset+0x22) 462           //location Y
   WRITE_SHORT (offset+0x24) 6	           //invisible
   WRITE_SHORT (offset+0x38) 450           //bounding box left
   WRITE_SHORT (offset+0x3a) 343           //bounding box top
   WRITE_SHORT (offset+0x3c) 540           //bounding box right
   WRITE_SHORT (offset+0x3e) 457           //bounding box bottom
   WRITE_LONG  (offset+0x40) "%items_num%" //1st item index
   WRITE_LONG  (offset+0x44) 3              //3 item
   WRITE_LONG  (offset+0x50) "%vert_num%"+6 //1st vertex index
   WRITE_SHORT (offset+0x54) 5              //vertices number
   SET "cont_num" = "%cont_num%" + 1
   WRITE_SHORT 0x74  "%cont_num%"
   SET "info_ext"=0xc0

   PATCH_IF ("%actors_offset%">"%cont_offset%")
   OR (("%actors_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%cont_offset%")
   OR (("%spawns_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%cont_offset%")
   OR (("%entrances_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%cont_offset%")
   OR (("%infotrig_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%items_offset%">"%cont_offset%")
   OR (("%items_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%vert_offset%">"%cont_offset%")
   OR (("%vert_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%amb_offset%">"%cont_offset%")
   OR (("%amb_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%cont_offset%")
   OR (("%vars_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%cont_offset%")
   OR (("%expbmp_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%cont_offset%")
   OR (("%doors_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%cont_offset%")
   OR (("%anim_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%cont_offset%")
   OR (("%tiled_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%cont_offset%")
   OR (("%songs_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%cont_offset%")
   OR (("%rest_spawns_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%cont_offset%")
   OR (("%automap_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

	 PATCH_IF ("%projectile_traps_offset%">"%cont_offset%")
	 OR (("%projectile_traps_offset%" == "%cont_offset%") AND ("%cont_num%" == 0))
	 BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END

//adding 1 item
   SET offset = ("%items_offset%"+0x14*"%items_num%")
   INSERT_BYTES offset        0x14
   WRITE_ASCII  offset        ~SW1H05~
   WRITE_SHORT  (offset+0x0a) 0
   WRITE_LONG   (offset+0x10) 0x00000001


   SET "info_ext"=0x14                 //we added 1 item

   PATCH_IF ("%actors_offset%">"%items_offset%")
   OR (("%actors_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%items_offset%")
   OR (("%spawns_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%items_offset%")
   OR (("%entrances_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%items_offset%")
   OR (("%cont_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%vert_offset%">"%items_offset%")
   OR (("%vert_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%items_offset%")
   OR (("%infotrig_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%amb_offset%">"%items_offset%")
   OR (("%amb_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%items_offset%")
   OR (("%vars_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%items_offset%")
   OR (("%exbmp_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%items_offset%")
   OR (("%doors_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%items_offset%")
   OR (("%anim_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%items_offset%")
   OR (("%tiled_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%items_offset%")
   OR (("%songs_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%items_offset%")
   OR (("%rest_spawns_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%items_offset%")
   OR (("%automap_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%items_offset%")
   OR (("%projectile_traps_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END



  //adding 1 item
   SET offset = ("%items_offset%"+0x14*"%items_num%")
   INSERT_BYTES offset        0x14
   WRITE_ASCII  offset        ~BOOK37~
   WRITE_SHORT  (offset+0x0a) 0
   WRITE_LONG   (offset+0x10) 0x00000001


   SET "info_ext"=0x14                 //we added 1 item

   PATCH_IF ("%actors_offset%">"%items_offset%")
   OR (("%actors_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%items_offset%")
   OR (("%spawns_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%items_offset%")
   OR (("%entrances_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%items_offset%")
   OR (("%cont_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%vert_offset%">"%items_offset%")
   OR (("%vert_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%items_offset%")
   OR (("%infotrig_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%amb_offset%">"%items_offset%")
   OR (("%amb_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%items_offset%")
   OR (("%vars_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%items_offset%")
   OR (("%exbmp_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%items_offset%")
   OR (("%doors_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%items_offset%")
   OR (("%anim_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%items_offset%")
   OR (("%tiled_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%items_offset%")
   OR (("%songs_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%items_offset%")
   OR (("%rest_spawns_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%items_offset%")
   OR (("%automap_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%items_offset%")
   OR (("%projectile_traps_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END


//adding 1 item
   SET offset = ("%items_offset%"+0x14*"%items_num%")
   INSERT_BYTES offset        0x14
   WRITE_ASCII  offset        ~BOOK49~
   WRITE_SHORT  (offset+0x0a) 0
   WRITE_LONG   (offset+0x10) 0x00000001


   SET "info_ext"=0x14                 //we added 1 item

   PATCH_IF ("%actors_offset%">"%items_offset%")
   OR (("%actors_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%items_offset%")
   OR (("%spawns_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%items_offset%")
   OR (("%entrances_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%items_offset%")
   OR (("%cont_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%vert_offset%">"%items_offset%")
   OR (("%vert_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%items_offset%")
   OR (("%infotrig_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%amb_offset%">"%items_offset%")
   OR (("%amb_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%items_offset%")
   OR (("%vars_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%items_offset%")
   OR (("%exbmp_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%items_offset%")
   OR (("%doors_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%items_offset%")
   OR (("%anim_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%items_offset%")
   OR (("%tiled_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%items_offset%")
   OR (("%songs_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%items_offset%")
   OR (("%rest_spawns_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%items_offset%")
   OR (("%automap_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%items_offset%")
   OR (("%projectile_traps_offset%" == "%items_offset%") AND ("%items_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END


WRITE_SHORT 0x76  "%items_num%"+3       //increment total items count

  //adding 11 new vertices for trigger and container
   SET offset = ("%vert_offset%"+0x04*"%vert_num%")
   INSERT_BYTES offset (0x04*8)
   WRITE_SHORT  offset      371
   WRITE_SHORT  (offset+2)  490
   WRITE_SHORT  (offset+4)  311
   WRITE_SHORT  (offset+6)  527
   WRITE_SHORT  (offset+8)  371
   WRITE_SHORT  (offset+10) 566
   WRITE_SHORT  (offset+12) 429
   WRITE_SHORT  (offset+14) 516
   WRITE_SHORT  (offset+16) 381
   WRITE_SHORT  (offset+18) 482
   WRITE_SHORT  (offset+20) 371
   WRITE_SHORT  (offset+22) 490
   WRITE_SHORT  (offset+24) 450
   WRITE_SHORT  (offset+26) 403
   WRITE_SHORT  (offset+28) 538
   WRITE_SHORT  (offset+30) 342
   SET offset = offset + 4*8
   INSERT_BYTES offset (0x04*3)
   WRITE_SHORT  offset      540
   WRITE_SHORT  (offset+2)  397
   WRITE_SHORT  (offset+4)  453
   WRITE_SHORT  (offset+6)  457
   WRITE_SHORT  (offset+8)  450
   WRITE_SHORT  (offset+10) 403
   SET "vert_num"="%vert_num%"+11
   WRITE_SHORT 0x80  "%vert_num%"

   SET "info_ext"=0x04*11

   PATCH_IF ("%actors_offset%">"%vert_offset%")
   OR (("%actors_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%vert_offset%")
   OR (("%spawns_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%vert_offset%")
   OR (("%entrances_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%vert_offset%")
   OR (("%cont_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%vert_offset%")
   OR (("%items_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%vert_offset%")
   OR (("%infotrig_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%amb_offset%">"%vert_offset%")
   OR (("%amb_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%vert_offset%")
   OR (("%vars_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%vert_offset%")
   OR (("%expbmp_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%vert_offset%")
   OR (("%doors_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%vert_offset%")
   OR (("%anim_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%vert_offset%")
   OR (("%tiled_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%vert_offset%")
   OR (("%songs_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%vert_offset%")
   OR (("%rest_spawns_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%vert_offset%")
   OR (("%automap_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%vert_offset%")
   OR (("%projectile_traps_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END

 END



 SET info_1=1
 FOR( cnt=0; cnt<"%entrances_num%"; cnt=cnt+1 ) BEGIN  //entrance loop
   READ_ASCII ("%entrances_offset%"+0xc8*cnt)       "entrance_name" (17)
   PATCH_IF (("%entrance_name%" STRING_COMPARE_CASE "Exit3370")=0) BEGIN  //if already exists
     info_1=0
   END
 END

PATCH_IF (info_1=1) BEGIN             //adding new Entrance



SET offset = ("%entrances_offset%"+0x68*"%entrances_num%") //add a Entrances
INSERT_BYTES offset 0x68
WRITE_ASCII offset ~Exit3370~			//Name
WRITE_LONG (offset + 0x20) 445		//Location X
WRITE_LONG (offset + 0x22) 514		//Location Y
WRITE_LONG (offset + 0x26) 0			//Direction Facing
SET "entrances_num"="%entrances_num%"+1
WRITE_SHORT 0x6c  "%entrances_num%"
END

SET "info_ext"=0x68

   PATCH_IF ("%actors_offset%">"%entrances_offset%")
   OR (("%actors_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%entrances_offset%")
   OR (("%spawns_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%entrances_offset%")
   OR (("%infotrig_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%cont_offset%">"%entrances_offset%")
   OR (("%cont_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%entrances_offset%")
   OR (("%items_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%vert_offset%">"%entrances_offset%")
   OR (("%vert_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%amb_offset%">"%entrances_offset%")
   OR (("%amb_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%entrances_offset%")
   OR (("%vars_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%entrances_offset%")
   OR (("%expbmp_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%entrances_offset%")
   OR (("%doors_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%entrances_offset%")
   OR (("%anim_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%entrances_offset%")
   OR (("%tiled_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%entrances_offset%")
   OR (("%songs_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%entrances_offset%")
   OR (("%rest_spawns_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%entrances_offset%")
   OR (("%automap_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%entrances_offset%")
   OR (("%projectile_traps_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END
BUT_ONLY_IF_IT_CHANGES


COPY_EXISTING ~%AR1%.are~ ~override~
  SET ~container_to_add_to~ = 2
  SPRINT ~item_to_add~ ~%ITM3%~
  SET ~charges1~ = 0
  SET ~charges2~ = 0
  SET ~charges3~ = 0
  LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~
  BUT_ONLY_IF_IT_CHANGES


COPY_EXISTING ~%AR2%.are~ ~override~
 READ_LONG  0x54  "actors_offset"
 READ_SHORT 0x58  "actors_num"
 READ_SHORT 0x5a  "infotrig_num"
 READ_LONG  0x5c  "infotrig_offset"
 READ_LONG  0x60  "spawns_offset"
 READ_LONG  0x64  "spawns_num"
 READ_LONG  0x68  "entrances_offset"
 READ_LONG  0x6c  "entrances_num"
 READ_LONG  0x70  "cont_offset"
 READ_SHORT 0x74  "cont_num"
 READ_SHORT 0x76  "items_num"
 READ_LONG  0x78  "items_offset"
 READ_LONG  0x7c  "vert_offset"
 READ_SHORT 0x80  "vert_num"
 READ_SHORT 0x82  "amb_num"
 READ_LONG  0x84  "amb_offset"
 READ_LONG  0x88  "vars_offset"
 READ_LONG  0x8c  "vars_num"
 READ_LONG  0xa0  "expbmp_offset"
 READ_LONG  0xa4  "doors_num"
 READ_LONG  0xa8  "doors_offset"
 READ_LONG  0xac  "anim_num"
 READ_LONG  0xb0  "anim_offset"
 READ_LONG  0xb4  "tiled_num"
 READ_LONG  0xb8  "tiled_offset"
 READ_LONG  0xbc  "songs_offset"
 READ_LONG  0xc0  "rest_spawns_offset"
 READ_LONG  0xc4  "automap_offset"
 READ_LONG  0xc8  "automap_num"

 SET info_1=1
 FOR( cnt=0; cnt<"%infotrig_num%"; cnt=cnt+1 ) BEGIN
   READ_ASCII ("%infotrig_offset%"+0xc4*cnt)       "info_name"
   PATCH_IF (("%info_name%" STRING_COMPARE_CASE "Test")=0) BEGIN
     info_1=0
   END
 END

 PATCH_IF (info_1=1) BEGIN       //Add a Info/Travel Triggers
   SET offset = ("%infotrig_offset%"+0xc4*"%infotrig_num%")
   INSERT_BYTES offset 0xc4
   WRITE_ASCII offset ~Door0750~					//Name
   WRITE_SHORT (offset+0x20) 2            //Type of point (2 = Travel Trigger)
   WRITE_SHORT (offset+0x22) 3704         //Bounding box left
   WRITE_SHORT (offset+0x24) 2260         //Bounding box top
   WRITE_SHORT (offset+0x26) 3825         //Bounding box right
   WRITE_SHORT (offset+0x28) 2325         //Bounding box bottom
   WRITE_SHORT (offset+0x2a) 5            //# vertices
   WRITE_LONG  (offset+0x2c) "%vert_num%" //first vertex index
   WRITE_LONG  (offset+0x34) 30           //cursor rame number
   WRITE_ASCII (offset+0x38) ~CM0750~			//Destination area
   WRITE_ASCII (offset+0x40) ~Exit0700~		//Entrance name
   WRITE_LONG  (offset+0x60) 04						//Flag (04 = Party Required)
   WRITE_LONG  (offset+0x64) ~-1~					//Infopointtext (-1 = No such index)
   WRITE_SHORT (offset+0x6c) 0            //Trapped (0 = No)
   WRITE_SHORT (offset+0x70) 3764         //Trap location X
   WRITE_SHORT (offset+0x72) 2292         //Trap location Y
   WRITE_ASCII (offset+0x7c) ~~   			//script (none)
   SET "infotrig_num"="%infotrig_num%"+1
   WRITE_SHORT 0x5a  "%infotrig_num%"

   SET "info_ext"=0xc4

PATCH_IF ("%actors_offset%">"%infotrig_offset%")
   OR (("%actors_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%infotrig_offset%")
   OR (("%spawns_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%infotrig_offset%")
   OR (("%entrances_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%infotrig_offset%")
   OR (("%cont_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%infotrig_offset%")
   OR (("%items_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%vert_offset%">"%infotrig_offset%")
   OR (("%vert_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%amb_offset%">"%infotrig_offset%")
   OR (("%amb_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%infotrig_offset%")
   OR (("%vars_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%infotrig_offset%")
   OR (("%expbmp_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%infotrig_offset%")
   OR (("%doors_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%infotrig_offset%")
   OR (("%anim_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%infotrig_offset%")
   OR (("%tiled_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%infotrig_offset%")
   OR (("%songs_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%infotrig_offset%")
   OR (("%rest_spawns_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%infotrig_offset%")
   OR (("%automap_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%infotrig_offset%")
   OR (("%projectile_traps_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END

  //adding 5 new vertices for trigger and container
   SET offset = ("%vert_offset%"+0x04*"%vert_num%")
   INSERT_BYTES offset (0x04*5)
   WRITE_SHORT  offset      3704
   WRITE_SHORT  (offset+2)  2304
   WRITE_SHORT  (offset+4)  3812
   WRITE_SHORT  (offset+6)  2259
   WRITE_SHORT  (offset+8)  3825
   WRITE_SHORT  (offset+10) 2277
   WRITE_SHORT  (offset+12) 3717
   WRITE_SHORT  (offset+14) 2325
   WRITE_SHORT  (offset+16) 3704
   WRITE_SHORT  (offset+18) 2304
   SET "vert_num"="%vert_num%"+5
   WRITE_SHORT 0x80  "%vert_num%"

   SET "info_ext"=0x04*5

      PATCH_IF ("%actors_offset%">"%vert_offset%")
   OR (("%actors_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%vert_offset%")
   OR (("%spawns_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%vert_offset%")
   OR (("%entrances_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%vert_offset%")
   OR (("%cont_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%vert_offset%")
   OR (("%items_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%vert_offset%")
   OR (("%infotrig_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%amb_offset%">"%vert_offset%")
   OR (("%amb_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%vert_offset%")
   OR (("%vars_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%vert_offset%")
   OR (("%expbmp_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%vert_offset%")
   OR (("%doors_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%vert_offset%")
   OR (("%anim_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%vert_offset%")
   OR (("%tiled_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%vert_offset%")
   OR (("%songs_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%vert_offset%")
   OR (("%rest_spawns_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%vert_offset%")
   OR (("%automap_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%vert_offset%")
   OR (("%projectile_traps_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END

 END



SET info_1=1
 FOR( cnt=0; cnt<"%entrances_num%"; cnt=cnt+1 ) BEGIN  //spawns loop
   READ_ASCII ("%entrances_offset%"+0xc8*cnt)       "entrance_name" (17)
   PATCH_IF (("%entrance_name%" STRING_COMPARE_CASE "Exit0750")=0) BEGIN  //if already exists
     info_1=0
   END
 END

PATCH_IF (info_1=1) BEGIN             //adding new Entrance



SET offset = ("%entrances_offset%"+0x68*"%entrances_num%")
INSERT_BYTES offset 0x68
WRITE_ASCII offset ~Exit0750~			//Name
WRITE_LONG (offset + 0x20) 3730		//Location X
WRITE_LONG (offset + 0x22) 2238		//Location Y
WRITE_LONG (offset + 0x26) 0			//Direction Facing
SET "entrances_num"="%entrances_num%"+1
WRITE_SHORT 0x6c  "%entrances_num%"
END
SET "info_ext"=0x68

PATCH_IF ("%actors_offset%">"%entrances_offset%")
   OR (("%actors_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%entrances_offset%")
   OR (("%spawns_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%entrances_offset%")
   OR (("%infotrig_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%cont_offset%">"%entrances_offset%")
   OR (("%cont_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%entrances_offset%")
   OR (("%items_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%vert_offset%">"%entrances_offset%")
   OR (("%vert_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%amb_offset%">"%entrances_offset%")
   OR (("%amb_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%entrances_offset%")
   OR (("%vars_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%entrances_offset%")
   OR (("%expbmp_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%entrances_offset%")
   OR (("%doors_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%entrances_offset%")
   OR (("%anim_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%entrances_offset%")
   OR (("%tiled_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%entrances_offset%")
   OR (("%songs_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%entrances_offset%")
   OR (("%rest_spawns_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%entrances_offset%")
   OR (("%automap_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%entrances_offset%")
   OR (("%projectile_traps_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END
BUT_ONLY_IF_IT_CHANGES




COPY_EXISTING ~%AR3%.are~ ~override~
 READ_LONG  0x54  "actors_offset"
 READ_SHORT 0x58  "actors_num"
 READ_SHORT 0x5a  "infotrig_num"
 READ_LONG  0x5c  "infotrig_offset"
 READ_LONG  0x60  "spawns_offset"
 READ_LONG  0x64  "spawns_num"
 READ_LONG  0x68  "entrances_offset"
 READ_LONG  0x6c  "entrances_num"
 READ_LONG  0x70  "cont_offset"
 READ_SHORT 0x74  "cont_num"
 READ_SHORT 0x76  "items_num"
 READ_LONG  0x78  "items_offset"
 READ_LONG  0x7c  "vert_offset"
 READ_SHORT 0x80  "vert_num"
 READ_SHORT 0x82  "amb_num"
 READ_LONG  0x84  "amb_offset"
 READ_LONG  0x88  "vars_offset"
 READ_LONG  0x8c  "vars_num"
 READ_LONG  0xa0  "expbmp_offset"
 READ_LONG  0xa4  "doors_num"
 READ_LONG  0xa8  "doors_offset"
 READ_LONG  0xac  "anim_num"
 READ_LONG  0xb0  "anim_offset"
 READ_LONG  0xb4  "tiled_num"
 READ_LONG  0xb8  "tiled_offset"
 READ_LONG  0xbc  "songs_offset"
 READ_LONG  0xc0  "rest_spawns_offset"
 READ_LONG  0xc4  "automap_offset"
 READ_LONG  0xc8  "automap_num"
 READ_LONG  0xcc  "projectile_traps_offset"
 READ_LONG  0xd0  "projectile_traps_num"

 SET info_1=1
 FOR( cnt=0; cnt<"%infotrig_num%"; cnt=cnt+1 ) BEGIN
   READ_ASCII ("%infotrig_offset%"+0xc4*cnt)       "info_name"
   PATCH_IF (("%info_name%" STRING_COMPARE_CASE "Door2680")=0) BEGIN
     info_1=0
   END
 END

 PATCH_IF (info_1=1) BEGIN       //Add a Info/Travel Triggers
   SET offset = ("%infotrig_offset%"+0xc4*"%infotrig_num%")
   INSERT_BYTES offset 0xc4
   WRITE_ASCII offset ~Door2680~					//Name
   WRITE_SHORT (offset+0x20) 2            //Type of point (2 = Travel Trigger)
   WRITE_SHORT (offset+0x22) 576         //Bounding box left
   WRITE_SHORT (offset+0x24) 1480         //Bounding box top
   WRITE_SHORT (offset+0x26) 631         //Bounding box right
   WRITE_SHORT (offset+0x28) 1531         //Bounding box bottom
   WRITE_SHORT (offset+0x2a) 5            //# vertices
   WRITE_LONG  (offset+0x2c) "%vert_num%" //first vertex index
   WRITE_LONG  (offset+0x34) 28           //cursor rame number
   WRITE_ASCII (offset+0x38) ~CM2680~			//Destination area
   WRITE_ASCII (offset+0x40) ~Exit3901~		//Entrance name
   WRITE_LONG  (offset+0x60) 00						//Flag (04 = Party Required)
   WRITE_LONG  (offset+0x64) ~-1~					//Infopointtext (-1 = No such index)
   WRITE_SHORT (offset+0x6c) 0            //Trapped (0 = No)
   WRITE_SHORT (offset+0x70) 603         //Trap location X
   WRITE_SHORT (offset+0x72) 1505         //Trap location Y
   WRITE_ASCII (offset+0x7c) ~~   			//script (none)
   SET "infotrig_num"="%infotrig_num%"+1
   WRITE_SHORT 0x5a  "%infotrig_num%"

   SET "info_ext"=0xc4

   PATCH_IF ("%actors_offset%">"%infotrig_offset%")
   OR (("%actors_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%infotrig_offset%")
   OR (("%spawns_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%infotrig_offset%")
   OR (("%entrances_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%infotrig_offset%")
   OR (("%cont_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%infotrig_offset%")
   OR (("%items_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%vert_offset%">"%infotrig_offset%")
   OR (("%vert_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%amb_offset%">"%infotrig_offset%")
   OR (("%amb_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%infotrig_offset%")
   OR (("%vars_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%infotrig_offset%")
   OR (("%expbmp_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%infotrig_offset%")
   OR (("%doors_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%infotrig_offset%")
   OR (("%anim_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%infotrig_offset%")
   OR (("%tiled_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%infotrig_offset%")
   OR (("%songs_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%infotrig_offset%")
   OR (("%rest_spawns_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%infotrig_offset%")
   OR (("%automap_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%infotrig_offset%")
   OR (("%projectile_traps_offset%" == "%infotrig_offset%") AND ("%infotrig_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END



//adding 5 new vertices for trigger and container
   SET offset = ("%vert_offset%"+0x04*"%vert_num%")
   INSERT_BYTES offset (0x04*5)
   WRITE_SHORT  offset      576
   WRITE_SHORT  (offset+2)  1521
   WRITE_SHORT  (offset+4)  622
   WRITE_SHORT  (offset+6)  1479
   WRITE_SHORT  (offset+8)  631
   WRITE_SHORT  (offset+10) 1486
   WRITE_SHORT  (offset+12) 587
   WRITE_SHORT  (offset+14) 1531
   WRITE_SHORT  (offset+16) 576
   WRITE_SHORT  (offset+18) 1521
   SET "vert_num"="%vert_num%"+5
   WRITE_SHORT 0x80  "%vert_num%"

   SET "info_ext"=0x04*5

   PATCH_IF ("%actors_offset%">"%vert_offset%")
   OR (("%actors_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%vert_offset%")
   OR (("%spawns_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%vert_offset%")
   OR (("%entrances_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%vert_offset%")
   OR (("%cont_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%vert_offset%")
   OR (("%items_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%vert_offset%")
   OR (("%infotrig_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%amb_offset%">"%vert_offset%")
   OR (("%amb_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%vert_offset%")
   OR (("%vars_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%vert_offset%")
   OR (("%expbmp_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%vert_offset%")
   OR (("%doors_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%vert_offset%")
   OR (("%anim_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%vert_offset%")
   OR (("%tiled_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%vert_offset%")
   OR (("%songs_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%vert_offset%")
   OR (("%rest_spawns_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%vert_offset%")
   OR (("%automap_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%vert_offset%")
   OR (("%projectile_traps_offset%" == "%vert_offset%") AND ("%vert_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END
END













 SET info_1=1
 FOR( cnt=0; cnt<"%actors_num%"; cnt=cnt+1 ) BEGIN  //actors loop
   READ_ASCII ("%actors_offset%"+0x110*cnt)       "actor_name" (13)
   PATCH_IF (("%actor_name%" STRING_COMPARE_CASE "Vampiric Wolf 2")=0) BEGIN  //if already exists
     info_1=0
   END
 END

 PATCH_IF (info_1=1) BEGIN             //adding new actor
   SET offset = ("%actors_offset%"+0x110*"%actors_num%")
   INSERT_BYTES offset 0x110
   WRITE_ASCII offset ~Vampiric Wolf 2~
   WRITE_SHORT (offset+0x20) 1517         //X
   WRITE_SHORT (offset+0x22) 1274         //Y
   WRITE_SHORT (offset+0x24) 1517         //destination X
   WRITE_SHORT (offset+0x26) 1274         //destination Y
   WRITE_LONG  (offset+0x28) 1            //visible
   WRITE_BYTE  (offset+0x30) 0x13         //unknown
   WRITE_BYTE  (offset+0x31) 0x63         //unknown
   WRITE_LONG  (offset+0x34) 0           //orientation
   WRITE_LONG  (offset+0x38) 0xffffffff   //unknown
   WRITE_LONG  (offset+0x40) 0xffffffff   //schedule
   WRITE_EVALUATED_ASCII (offset+0x80) ~%Cre2%~   //creature
   SET "actors_num"="%actors_num%"+1
   WRITE_SHORT 0x58  "%actors_num%"
 END

 SET "info_ext"=0x110*info_1
 PATCH_IF ("%infotrig_offset%">"%actors_offset%")
 OR (("%infotrig_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
   WRITE_LONG  0x5c "%infotrig_offset%"
 END

 PATCH_IF ("%spawns_offset%">"%actors_offset%")
 OR (("%spawns_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "spawns_offset"="%spawns_offset%"+"%info_ext%"
   WRITE_LONG  0x60  "%spawns_offset%"
 END

 PATCH_IF ("%entrances_offset%">"%actors_offset%")
 OR (("%entrances_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "entrances_offset"="%entrances_offset%"+"%info_ext%"
   WRITE_LONG  0x68  "%entrances_offset%"
 END

 PATCH_IF ("%cont_offset%">"%actors_offset%")
 OR (("%cont_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "cont_offset"="%cont_offset%"+"%info_ext%"
   WRITE_LONG  0x70  "%cont_offset%"
 END

 PATCH_IF ("%items_offset%">"%actors_offset%")
 OR (("%items_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "items_offset"="%items_offset%"+"%info_ext%"
   WRITE_LONG  0x78  "%items_offset%"
 END

 PATCH_IF ("%vert_offset%">"%actors_offset%")
 OR (("%vert_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "vert_offset"="%vert_offset%"+"%info_ext%"
   WRITE_LONG  0x7c  "%vert_offset%"
 END

 PATCH_IF ("%amb_offset%">"%actors_offset%")
 OR (("%amb_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "amb_offset"="%amb_offset%"+"%info_ext%"
   WRITE_LONG  0x84  "%amb_offset%"
 END

 PATCH_IF ("%vars_offset%">"%actors_offset%")
 OR (("%vars_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "vars_offset"="%vars_offset%"+"%info_ext%"
   WRITE_LONG  0x88  "%vars_offset%"
 END

 PATCH_IF ("%expbmp_offset%">"%actors_offset%")
 OR (("%expbmp_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
   WRITE_LONG  0xa0  "%expbmp_offset%"
 END

 PATCH_IF ("%doors_offset%">"%actors_offset%")
 OR (("%doors_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "doors_offset"="%doors_offset%"+"%info_ext%"
   WRITE_LONG  0xa8  "%doors_offset%"
 END

 PATCH_IF ("%anim_offset%">"%actors_offset%")
 OR (("%anim_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "anim_offset"="%anim_offset%"+"%info_ext%"
   WRITE_LONG  0xb0  "%anim_offset%"
 END

 PATCH_IF ("%tiled_offset%">"%actors_offset%")
 OR (("%tiled_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "tiled_offset"="%tiled_offset%"+"%info_ext%"
   WRITE_LONG  0xb8  "%tiled_offset%"
 END

 PATCH_IF ("%songs_offset%">"%actors_offset%")
 OR (("%songs_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "songs_offset"="%songs_offset%"+"%info_ext%"
   WRITE_LONG  0xbc  "%songs_offset%"
 END

 PATCH_IF ("%rest_spawns_offset%">"%actors_offset%")
 OR (("%rest_spawns_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
   WRITE_LONG  0xc0  "%rest_spawns_offset%"
 END

 PATCH_IF ("%automap_offset%">"%actors_offset%")
 OR (("%automap_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "automap_offset"="%automap_offset%"+"%info_ext%"
   WRITE_LONG  0xc4  "%automap_offset%"
 END

 PATCH_IF ("%projectile_traps_offset%">"%actors_offset%")
 OR (("%projectile_traps_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END











SET info_1=1
 FOR( cnt=0; cnt<"%entrances_num%"; cnt=cnt+1 ) BEGIN  //entrance loop
   READ_ASCII ("%entrances_offset%"+0xc8*cnt)       "entrance_name" (17)
   PATCH_IF (("%entrance_name%" STRING_COMPARE_CASE "Exit2680")=0) BEGIN  //if already exists
     info_1=0
   END
 END

PATCH_IF (info_1=1) BEGIN             //adding new Entrance


SET offset = ("%entrances_offset%"+0x68*"%entrances_num%")
INSERT_BYTES offset 0x68
WRITE_ASCII offset ~Exit2680~			//Name
WRITE_LONG (offset + 0x20) 557		//Location X
WRITE_LONG (offset + 0x22) 1492		//Location Y
WRITE_LONG (offset + 0x26) 0			//Direction Facing
SET "entrances_num"="%entrances_num%"+1
WRITE_SHORT 0x6c  "%entrances_num%"
END
SET "info_ext"=0x68

PATCH_IF ("%actors_offset%">"%entrances_offset%")
   OR (("%actors_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%spawns_offset%">"%entrances_offset%")
   OR (("%spawns_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "spawns_offset"="%spawns_offset%"+"%info_ext%"
     WRITE_LONG  0x60  "%spawns_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%entrances_offset%")
   OR (("%infotrig_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%cont_offset%">"%entrances_offset%")
   OR (("%cont_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%entrances_offset%")
   OR (("%items_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%vert_offset%">"%entrances_offset%")
   OR (("%vert_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%amb_offset%">"%entrances_offset%")
   OR (("%amb_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%entrances_offset%")
   OR (("%vars_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%entrances_offset%")
   OR (("%expbmp_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%entrances_offset%")
   OR (("%doors_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%entrances_offset%")
   OR (("%anim_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%entrances_offset%")
   OR (("%tiled_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%entrances_offset%")
   OR (("%songs_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%entrances_offset%")
   OR (("%rest_spawns_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%entrances_offset%")
   OR (("%automap_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%entrances_offset%")
   OR (("%projectile_traps_offset%" == "%entrances_offset%") AND ("%entrances_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END

SET info_1=1
 FOR( cnt=0; cnt<"%spawns_num%"; cnt=cnt+1 ) BEGIN  //spawns loop
   READ_ASCII ("%spawns_offset%"+0xc8*cnt)       "spawn_name" (17)
   PATCH_IF (("%spawn_name%" STRING_COMPARE_CASE "New Spawn Point 1")=0) BEGIN  //if already exists
     info_1=0
   END
 END

 PATCH_IF (info_1=1) BEGIN             //adding new spawn point
   SET offset = ("%spawns_offset%"+0xc8*"%spawns_num%")
   INSERT_BYTES offset 0xc8
   WRITE_ASCII offset ~New Spawn Point 1~ #32
   WRITE_SHORT (offset+0x20) 549         //X
   WRITE_SHORT (offset+0x22) 1162         //Y
   WRITE_EVALUATED_ASCII (offset+0x24) ~%Cre1%~         //Cre 1
   WRITE_SHORT (offset+0x74) 1         //Numbers of cre
   WRITE_SHORT (offset+0x76) 2         //Spawn frequency
   WRITE_LONG (offset+0x78) 65542         //Secends beetween spawns
   WRITE_SHORT (offset+0x86) 1         //Max spawned cres
   WRITE_LONG (offset+0x88) 0xfffffFff         //Presents at
   WRITE_SHORT (offset+0x8c) 0x64         //Presents at
   SET "spawns_num"="%spawns_num%"+1
   WRITE_LONG 0x64  "%spawns_num%"
 END

   SET "info_ext"=0xc8*info_1

   PATCH_IF ("%actors_offset%">"%spawns_offset%")
   OR (("%actors_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%vert_offset%">"%spawns_offset%")
   OR (("%vert_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%spawns_offset%")
   OR (("%entrances_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%spawns_offset%")
   OR (("%cont_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%spawns_offset%")
   OR (("%items_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%spawns_offset%")
   OR (("%infotrig_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%amb_offset%">"%spawns_offset%")
   OR (("%amb_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%spawns_offset%")
   OR (("%vars_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%spawns_offset%")
   OR (("%expbmp_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%spawns_offset%")
   OR (("%doors_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%spawns_offset%")
   OR (("%anim_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%spawns_offset%")
   OR (("%tiled_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%spawns_offset%")
   OR (("%songs_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%spawns_offset%")
   OR (("%rest_spawns_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%spawns_offset%")
   OR (("%automap_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%spawns_offset%")
   OR (("%projectile_traps_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END


SET info_1=1
 FOR( cnt=0; cnt<"%spawns_num%"; cnt=cnt+1 ) BEGIN  //spawns loop
   READ_ASCII ("%spawns_offset%"+0xc8*cnt)       "spawn_name" (17)
   PATCH_IF (("%spawn_name%" STRING_COMPARE_CASE "New Spawn Point 2")=0) BEGIN  //if already exists
     info_1=0
   END
 END

 PATCH_IF (info_1=1) BEGIN             //adding new spawn point
   SET offset = ("%spawns_offset%"+0xc8*"%spawns_num%")
   INSERT_BYTES offset 0xc8
   WRITE_ASCII offset ~New Spawn Point 2~ #32
   WRITE_SHORT (offset+0x20) 497         //X
   WRITE_SHORT (offset+0x22) 1472         //Y
   WRITE_EVALUATED_ASCII (offset+0x24) ~%Cre1%~         //Cre 1
   WRITE_SHORT (offset+0x74) 1         //Numbers of cre
   WRITE_SHORT (offset+0x76) 2         //Spawn frequency
   WRITE_LONG (offset+0x78) 65542         //Secends beetween spawns
   WRITE_SHORT (offset+0x86) 1         //Max spawned cres
   WRITE_LONG (offset+0x88) 0xfffffFff         //Presents at
   WRITE_SHORT (offset+0x8c) 0x64         //Presents at
   SET "spawns_num"="%spawns_num%"+1
   WRITE_LONG 0x64  "%spawns_num%"
 END

   SET "info_ext"=0xc8*info_1
   PATCH_IF ("%actors_offset%">"%spawns_offset%")
   OR (("%actors_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "actors_offset"="%actors_offset%"+"%info_ext%"
     WRITE_LONG  0x54 "%actors_offset%"
   END

   PATCH_IF ("%vert_offset%">"%spawns_offset%")
   OR (("%vert_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "vert_offset"="%vert_offset%"+"%info_ext%"
     WRITE_LONG  0x7c  "%vert_offset%"
   END

   PATCH_IF ("%entrances_offset%">"%spawns_offset%")
   OR (("%entrances_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "entrances_offset"="%entrances_offset%"+"%info_ext%"
     WRITE_LONG  0x68  "%entrances_offset%"
   END

   PATCH_IF ("%cont_offset%">"%spawns_offset%")
   OR (("%cont_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "cont_offset"="%cont_offset%"+"%info_ext%"
     WRITE_LONG  0x70  "%cont_offset%"
   END

   PATCH_IF ("%items_offset%">"%spawns_offset%")
   OR (("%items_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "items_offset"="%items_offset%"+"%info_ext%"
     WRITE_LONG  0x78  "%items_offset%"
   END

   PATCH_IF ("%infotrig_offset%">"%spawns_offset%")
   OR (("%infotrig_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
     WRITE_LONG  0x5c  "%infotrig_offset%"
   END

   PATCH_IF ("%amb_offset%">"%spawns_offset%")
   OR (("%amb_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "amb_offset"="%amb_offset%"+"%info_ext%"
     WRITE_LONG  0x84  "%amb_offset%"
   END

   PATCH_IF ("%vars_offset%">"%spawns_offset%")
   OR (("%vars_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "vars_offset"="%vars_offset%"+"%info_ext%"
     WRITE_LONG  0x88  "%vars_offset%"
   END

   PATCH_IF ("%expbmp_offset%">"%spawns_offset%")
   OR (("%expbmp_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
     WRITE_LONG  0xa0  "%expbmp_offset%"
   END

   PATCH_IF ("%doors_offset%">"%spawns_offset%")
   OR (("%doors_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "doors_offset"="%doors_offset%"+"%info_ext%"
     WRITE_LONG  0xa8  "%doors_offset%"
   END

   PATCH_IF ("%anim_offset%">"%spawns_offset%")
   OR (("%anim_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "anim_offset"="%anim_offset%"+"%info_ext%"
     WRITE_LONG  0xb0  "%anim_offset%"
   END

   PATCH_IF ("%tiled_offset%">"%spawns_offset%")
   OR (("%tiled_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "tiled_offset"="%tiled_offset%"+"%info_ext%"
     WRITE_LONG  0xb8  "%tiled_offset%"
   END

   PATCH_IF ("%songs_offset%">"%spawns_offset%")
   OR (("%songs_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "songs_offset"="%songs_offset%"+"%info_ext%"
     WRITE_LONG  0xbc  "%songs_offset%"
   END

   PATCH_IF ("%rest_spawns_offset%">"%spawns_offset%")
   OR (("%rest_spawns_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
     WRITE_LONG  0xc0  "%rest_spawns_offset%"
   END

   PATCH_IF ("%automap_offset%">"%spawns_offset%")
   OR (("%automap_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
     "automap_offset"="%automap_offset%"+"%info_ext%"
     WRITE_LONG  0xc4  "%automap_offset%"
   END

   PATCH_IF ("%projectile_traps_offset%">"%spawns_offset%")
   OR (("%projectile_traps_offset%" == "%spawns_offset%") AND ("%spawns_num%" == 0))
   BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END
BUT_ONLY_IF_IT_CHANGES

COPY_EXISTING ~%AR3%.are~ ~override~
SET ~container_to_add_to~ = 4
SPRINT ~item_to_add~ ~clck03~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~
BUT_ONLY_IF_IT_CHANGES

/* Areas that add items to containers. */


COPY_EXISTING ~%AR4%.ARE~ ~override~
SET ~container_to_add_to~ = 8
SPRINT ~item_to_add~ ~MISC07~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

BUT_ONLY

COPY_EXISTING ~%AR5%.ARE~ ~override~
SET ~container_to_add_to~ = 2
SPRINT ~item_to_add~ ~SW1H03~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

SET ~container_to_add_to~ = 2
SPRINT ~item_to_add~ ~CMHEAL1~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

SET ~container_to_add_to~ = 5
SPRINT ~item_to_add~ ~MACMLE02~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~
BUT_ONLY


COPY_EXISTING ~%AR6%.ARE~ ~override~
 READ_SHORT 0x76  "items_num"
 READ_LONG  0x78  "items_offset"

SET item_1=1
SET cnt2=0
SET cnt3=0
	FOR( cnt=0; cnt<"%items_num%"; cnt=cnt+1 ) BEGIN
		PATCH_IF cnt2<2 BEGIN
   	READ_ASCII ("%items_offset%"+0x14*cnt)       "item_name"
   //	PATCH_PRINT "%item_name%"
   	PATCH_IF (("%item_name%" STRING_COMPARE_CASE "HALB01")=0) BEGIN
    	 item_1=0
    	 SET "item_patch" = "%items_offset%"
    	 cnt2=cnt2+1
    	 cnt3=cnt
  	 END
  	 END
 	END

PATCH_IF (item_1=0) BEGIN
SET offset = ("%items_offset%"+0x14*cnt3)
WRITE_ASCII offset ~HALB03~
END

SPRINT ~old_item~ ~SPER01~
SPRINT ~new_item~ ~STAF05~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SPRINT ~old_item~ ~CLCK01~
SPRINT ~new_item~ ~CLCK02~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~
BUT_ONLY


COPY_EXISTING ~%AR7%.ARE~ ~override~
 READ_SHORT 0x76  "items_num"
 READ_LONG  0x78  "items_offset"

SPRINT ~old_item~ ~SW1H20~
SPRINT ~new_item~ ~MA1SW02~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SPRINT ~old_item~ ~SPER01~
SPRINT ~new_item~ ~SPER02~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~


SET item_1=1
SET cnt2=0
SET cnt3=0
	FOR( cnt=0; cnt<"%items_num%"; cnt=cnt+1 ) BEGIN
		PATCH_IF cnt2<10 BEGIN
   	READ_ASCII ("%items_offset%"+0x14*cnt)       "item_name"
   //	PATCH_PRINT "%item_name%"
   	PATCH_IF (("%item_name%" STRING_COMPARE_CASE "AROW01")=0) BEGIN
    	 item_1=0
    	 SET "item_patch" = "%items_offset%"
    	 cnt2=cnt2+1
    	 cnt3=cnt
  	 END
  	 END
 	END

PATCH_IF (item_1=0) BEGIN
SET offset = ("%items_offset%"+0x14*cnt3)
WRITE_ASCII offset ~AROW04~
END

SET item_1=1
SET cnt2=0
SET cnt3=0
	FOR( cnt=0; cnt<"%items_num%"; cnt=cnt+1 ) BEGIN
		PATCH_IF cnt2<2 BEGIN
   	READ_ASCII ("%items_offset%"+0x14*cnt)       "item_name"
   	PATCH_IF (("%item_name%" STRING_COMPARE_CASE "HAMM01")=0) BEGIN
    	 item_1=0
    	 SET "item_patch" = "%items_offset%"
    	 cnt2=cnt2+1
    	 cnt3=cnt
  	 END
  	 END
 	END

PATCH_IF (item_1=0) BEGIN
SET offset = ("%items_offset%"+0x14*cnt3)
WRITE_ASCII offset ~HAMM02~
END

SET item_1=1
SET cnt2=0
SET cnt3=0
	FOR( cnt=0; cnt<"%items_num%"; cnt=cnt+1 ) BEGIN
		PATCH_IF cnt2<1 BEGIN
   	READ_ASCII ("%items_offset%"+0x14*cnt)       "item_name"
   	PATCH_IF (("%item_name%" STRING_COMPARE_CASE "XBOW01")=0) BEGIN
    	 item_1=0
    	 SET "item_patch" = "%items_offset%"
    	 cnt2=cnt2+1
    	 cnt3=cnt
  	 END
  	 END
 	END

PATCH_IF (item_1=0) BEGIN
SET offset = ("%items_offset%"+0x14*cnt3)
WRITE_ASCII offset ~XBOW02~
END

SPRINT ~old_item~ ~BLUN02~
SPRINT ~new_item~ ~BLUN03~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SPRINT ~old_item~ ~HALB01~
SPRINT ~new_item~ ~HALB03~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SPRINT ~old_item~ ~BULL01~
SPRINT ~new_item~ ~BULL03~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SET item_1=1
SET cnt2=0
SET cnt3=0
	FOR( cnt=0; cnt<"%items_num%"; cnt=cnt+1 ) BEGIN
		PATCH_IF cnt2<1 BEGIN
   	READ_ASCII ("%items_offset%"+0x14*cnt)       "item_name"
   	PATCH_IF (("%item_name%" STRING_COMPARE_CASE "BOW01")=0) BEGIN
    	 item_1=0
    	 SET "item_patch" = "%items_offset%"
    	 cnt2=cnt2+1
    	 cnt3=cnt
  	 END
  	 END
 	END

PATCH_IF (item_1=0) BEGIN
SET offset = ("%items_offset%"+0x14*cnt3)
WRITE_ASCII offset ~BOW02~
END


SPRINT ~old_item~ ~SHLD02~
SPRINT ~new_item~ ~SHLD07~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SPRINT ~old_item~ ~AX1H04~
SPRINT ~new_item~ ~AX1H05~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SET item_1=1
SET cnt2=0
SET cnt3=0
	FOR( cnt=0; cnt<"%items_num%"; cnt=cnt+1 ) BEGIN
		PATCH_IF cnt2<1 BEGIN
   	READ_ASCII ("%items_offset%"+0x14*cnt)       "item_name"
   	PATCH_IF (("%item_name%" STRING_COMPARE_CASE "XBOW01")=0) BEGIN
    	 item_1=0
    	 SET "item_patch" = "%items_offset%"
    	 cnt2=cnt2+1
    	 cnt3=cnt
  	 END
  	 END
 	END

PATCH_IF (item_1=0) BEGIN
SET offset = ("%items_offset%"+0x14*cnt3)
WRITE_ASCII offset ~XBOW03~
END

SET item_1=1
SET cnt2=0
SET cnt3=0
	FOR( cnt=0; cnt<"%items_num%"; cnt=cnt+1 ) BEGIN
		PATCH_IF cnt2<1 BEGIN
   	READ_ASCII ("%items_offset%"+0x14*cnt)       "item_name"
   	PATCH_IF (("%item_name%" STRING_COMPARE_CASE "BOW01")=0) BEGIN
    	 item_1=0
    	 SET "item_patch" = "%items_offset%"
    	 cnt2=cnt2+1
    	 cnt3=cnt
  	 END
  	 END
 	END

PATCH_IF (item_1=0) BEGIN
SET offset = ("%items_offset%"+0x14*cnt3)
WRITE_ASCII offset ~BOW04~
END

SET ~container_to_add_to~ = 8
SPRINT ~item_to_add~ ~book04~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

BUT_ONLY


COPY_EXISTING ~%AR8%.ARE~ ~override~

SPRINT ~old_item~ ~CLCK14~
SPRINT ~new_item~ ~CLCK15~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SPRINT ~old_item~ ~SCRL5K~
SPRINT ~new_item~ ~SCRL5I~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SPRINT ~old_item~ ~BULL02~
SPRINT ~new_item~ ~BULL03~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SET ~container_to_add_to~ = 22
SPRINT ~item_to_add~ ~MACMHE01~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

BUT_ONLY

COPY_EXISTING ~%AR9%.ARE~ ~override~
SET ~container_to_add_to~ = 1
SPRINT ~item_to_add~ ~MAAX1H03~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~


SET ~container_to_add_to~ = 9
SPRINT ~item_to_add~ ~MISC07~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

BUT_ONLY

COPY_EXISTING ~%AR10%.ARE~ ~override~
SET ~container_to_add_to~ = 2
SPRINT ~item_to_add~ ~MISC07~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~


SET ~container_to_add_to~ = 3
SPRINT ~item_to_add~ ~MPLAT01~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

SET ~container_to_add_to~ = 4
SPRINT ~item_to_add~ ~MABRAC01~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

SET ~container_to_add_to~ = 36
SPRINT ~item_to_add~ ~AROW06~
SET ~charges1~ = 20
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~
BUT_ONLY


COPY_EXISTING ~%AR11%.ARE~ ~override~
 READ_LONG  0x54  "actors_offset"
 READ_SHORT 0x58  "actors_num"
 READ_SHORT 0x5a  "infotrig_num"
 READ_LONG  0x5c  "infotrig_offset"
 READ_LONG  0x60  "spawns_offset"
 READ_LONG  0x64  "spawns_num"
 READ_LONG  0x68  "entrances_offset"
 READ_LONG  0x6c  "entrances_num"
 READ_LONG  0x70  "cont_offset"
 READ_SHORT 0x74  "cont_num"
 READ_SHORT 0x76  "items_num"
 READ_LONG  0x78  "items_offset"
 READ_LONG  0x7c  "vert_offset"
 READ_SHORT 0x80  "vert_num"
 READ_SHORT 0x82  "amb_num"
 READ_LONG  0x84  "amb_offset"
 READ_LONG  0x88  "vars_offset"
 READ_LONG  0x8c  "vars_num"
 READ_LONG  0xa0  "expbmp_offset"
 READ_LONG  0xa4  "doors_num"
 READ_LONG  0xa8  "doors_offset"
 READ_LONG  0xac  "anim_num"
 READ_LONG  0xb0  "anim_offset"
 READ_LONG  0xb4  "tiled_num"
 READ_LONG  0xb8  "tiled_offset"
 READ_LONG  0xbc  "songs_offset"
 READ_LONG  0xc0  "rest_spawns_offset"
 READ_LONG  0xc4  "automap_offset"
 READ_LONG  0xc8  "automap_num"
 READ_LONG	0xcc	"projectile_traps_offset"
 READ_LONG	0xd0	"projectile_traps_num"

SET info_1=1
 FOR( cnt=0; cnt<"%actors_num%"; cnt=cnt+1 ) BEGIN  //actors loop
   READ_ASCII ("%actors_offset%"+0x110*cnt)       "actor_name" (13)
   PATCH_IF (("%actor_name%" STRING_COMPARE_CASE "Sailor2")=0) BEGIN  //if already exists
     info_1=0
   END
 END

 PATCH_IF (info_1=1) BEGIN             //adding new actor
   SET offset = ("%actors_offset%"+0x110*"%actors_num%")
   INSERT_BYTES offset 0x110
   WRITE_ASCII offset ~Sailor2~
   WRITE_SHORT (offset+0x20) 898         //X
   WRITE_SHORT (offset+0x22) 1068         //Y
   WRITE_SHORT (offset+0x24) 898         //destination X
   WRITE_SHORT (offset+0x26) 1068         //destination Y
   WRITE_LONG  (offset+0x28) 1            //visible
   WRITE_BYTE  (offset+0x30) 0x13         //unknown
   WRITE_BYTE  (offset+0x31) 0x63         //unknown
   WRITE_LONG  (offset+0x34) 0           //orientation
   WRITE_LONG  (offset+0x38) 0xffffffff   //unknown
   WRITE_LONG  (offset+0x40) 0xffffffff   //schedule
   WRITE_ASCII (offset+0x80) ~MASAL02~   //creature
   SET "actors_num"="%actors_num%"+1
   WRITE_SHORT 0x58  "%actors_num%"
 END

 SET "info_ext"=0x110*info_1
 PATCH_IF ("%infotrig_offset%">"%actors_offset%")
 OR (("%infotrig_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
   WRITE_LONG  0x5c "%infotrig_offset%"
 END

 PATCH_IF ("%spawns_offset%">"%actors_offset%")
 OR (("%spawns_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "spawns_offset"="%spawns_offset%"+"%info_ext%"
   WRITE_LONG  0x60  "%spawns_offset%"
 END

 PATCH_IF ("%entrances_offset%">"%actors_offset%")
 OR (("%entrances_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "entrances_offset"="%entrances_offset%"+"%info_ext%"
   WRITE_LONG  0x68  "%entrances_offset%"
 END

 PATCH_IF ("%cont_offset%">"%actors_offset%")
 OR (("%cont_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "cont_offset"="%cont_offset%"+"%info_ext%"
   WRITE_LONG  0x70  "%cont_offset%"
 END

 PATCH_IF ("%items_offset%">"%actors_offset%")
 OR (("%items_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "items_offset"="%items_offset%"+"%info_ext%"
   WRITE_LONG  0x78  "%items_offset%"
 END

 PATCH_IF ("%vert_offset%">"%actors_offset%")
 OR (("%vert_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "vert_offset"="%vert_offset%"+"%info_ext%"
   WRITE_LONG  0x7c  "%vert_offset%"
 END

 PATCH_IF ("%amb_offset%">"%actors_offset%")
 OR (("%amb_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "amb_offset"="%amb_offset%"+"%info_ext%"
   WRITE_LONG  0x84  "%amb_offset%"
 END

 PATCH_IF ("%vars_offset%">"%actors_offset%")
 OR (("%vars_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "vars_offset"="%vars_offset%"+"%info_ext%"
   WRITE_LONG  0x88  "%vars_offset%"
 END

 PATCH_IF ("%expbmp_offset%">"%actors_offset%")
 OR (("%expbmp_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
   WRITE_LONG  0xa0  "%expbmp_offset%"
 END

 PATCH_IF ("%doors_offset%">"%actors_offset%")
 OR (("%doors_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "doors_offset"="%doors_offset%"+"%info_ext%"
   WRITE_LONG  0xa8  "%doors_offset%"
 END

 PATCH_IF ("%anim_offset%">"%actors_offset%")
 OR (("%anim_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "anim_offset"="%anim_offset%"+"%info_ext%"
   WRITE_LONG  0xb0  "%anim_offset%"
 END

 PATCH_IF ("%tiled_offset%">"%actors_offset%")
 OR (("%tiled_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "tiled_offset"="%tiled_offset%"+"%info_ext%"
   WRITE_LONG  0xb8  "%tiled_offset%"
 END

 PATCH_IF ("%songs_offset%">"%actors_offset%")
 OR (("%songs_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "songs_offset"="%songs_offset%"+"%info_ext%"
   WRITE_LONG  0xbc  "%songs_offset%"
 END

 PATCH_IF ("%rest_spawns_offset%">"%actors_offset%")
 OR (("%rest_spawns_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
   WRITE_LONG  0xc0  "%rest_spawns_offset%"
 END

 PATCH_IF ("%automap_offset%">"%actors_offset%")
 OR (("%automap_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "automap_offset"="%automap_offset%"+"%info_ext%"
   WRITE_LONG  0xc4  "%automap_offset%"
 END

 PATCH_IF ("%projectile_traps_offset%">"%actors_offset%")
 OR (("%projectile_traps_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END




SET info_1=1
 FOR( cnt=0; cnt<"%actors_num%"; cnt=cnt+1 ) BEGIN  //actors loop
   READ_ASCII ("%actors_offset%"+0x110*cnt)       "actor_name" (13)
   PATCH_IF (("%actor_name%" STRING_COMPARE_CASE "Sailor1")=0) BEGIN  //if already exists
     info_1=0
   END
 END

 PATCH_IF (info_1=1) BEGIN             //adding new actor
   SET offset = ("%actors_offset%"+0x110*"%actors_num%")
   INSERT_BYTES offset 0x110
   WRITE_ASCII offset ~Sailor1~
   WRITE_SHORT (offset+0x20) 819         //X
   WRITE_SHORT (offset+0x22) 1018         //Y
   WRITE_SHORT (offset+0x24) 819         //destination X
   WRITE_SHORT (offset+0x26) 1018         //destination Y
   WRITE_LONG  (offset+0x28) 1            //visible
   WRITE_BYTE  (offset+0x30) 0x13         //unknown
   WRITE_BYTE  (offset+0x31) 0x63         //unknown
   WRITE_LONG  (offset+0x34) 0           //orientation
   WRITE_LONG  (offset+0x38) 0xffffffff   //unknown
   WRITE_LONG  (offset+0x40) 0xffffffff   //schedule
   WRITE_ASCII (offset+0x80) ~MASAL01~   //creature
   SET "actors_num"="%actors_num%"+1
   WRITE_SHORT 0x58  "%actors_num%"
 END

 SET "info_ext"=0x110*info_1
 PATCH_IF ("%infotrig_offset%">"%actors_offset%")
 OR (("%infotrig_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "infotrig_offset"="%infotrig_offset%"+"%info_ext%"
   WRITE_LONG  0x5c "%infotrig_offset%"
 END

 PATCH_IF ("%spawns_offset%">"%actors_offset%")
 OR (("%spawns_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "spawns_offset"="%spawns_offset%"+"%info_ext%"
   WRITE_LONG  0x60  "%spawns_offset%"
 END

 PATCH_IF ("%entrances_offset%">"%actors_offset%")
 OR (("%entrances_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "entrances_offset"="%entrances_offset%"+"%info_ext%"
   WRITE_LONG  0x68  "%entrances_offset%"
 END

 PATCH_IF ("%cont_offset%">"%actors_offset%")
 OR (("%cont_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "cont_offset"="%cont_offset%"+"%info_ext%"
   WRITE_LONG  0x70  "%cont_offset%"
 END

 PATCH_IF ("%items_offset%">"%actors_offset%")
 OR (("%items_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "items_offset"="%items_offset%"+"%info_ext%"
   WRITE_LONG  0x78  "%items_offset%"
 END

 PATCH_IF ("%vert_offset%">"%actors_offset%")
 OR (("%vert_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "vert_offset"="%vert_offset%"+"%info_ext%"
   WRITE_LONG  0x7c  "%vert_offset%"
 END

 PATCH_IF ("%amb_offset%">"%actors_offset%")
 OR (("%amb_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "amb_offset"="%amb_offset%"+"%info_ext%"
   WRITE_LONG  0x84  "%amb_offset%"
 END

 PATCH_IF ("%vars_offset%">"%actors_offset%")
 OR (("%vars_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "vars_offset"="%vars_offset%"+"%info_ext%"
   WRITE_LONG  0x88  "%vars_offset%"
 END

 PATCH_IF ("%expbmp_offset%">"%actors_offset%")
 OR (("%expbmp_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "expbmp_offset"="%expbmp_offset%"+"%info_ext%"
   WRITE_LONG  0xa0  "%expbmp_offset%"
 END

 PATCH_IF ("%doors_offset%">"%actors_offset%")
 OR (("%doors_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "doors_offset"="%doors_offset%"+"%info_ext%"
   WRITE_LONG  0xa8  "%doors_offset%"
 END

 PATCH_IF ("%anim_offset%">"%actors_offset%")
 OR (("%anim_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "anim_offset"="%anim_offset%"+"%info_ext%"
   WRITE_LONG  0xb0  "%anim_offset%"
 END

 PATCH_IF ("%tiled_offset%">"%actors_offset%")
 OR (("%tiled_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "tiled_offset"="%tiled_offset%"+"%info_ext%"
   WRITE_LONG  0xb8  "%tiled_offset%"
 END

 PATCH_IF ("%songs_offset%">"%actors_offset%")
 OR (("%songs_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "songs_offset"="%songs_offset%"+"%info_ext%"
   WRITE_LONG  0xbc  "%songs_offset%"
 END

 PATCH_IF ("%rest_spawns_offset%">"%actors_offset%")
 OR (("%rest_spawns_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "rest_spawns_offset"="%rest_spawns_offset%"+"%info_ext%"
   WRITE_LONG  0xc0  "%rest_spawns_offset%"
 END

 PATCH_IF ("%automap_offset%">"%actors_offset%")
 OR (("%automap_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "automap_offset"="%automap_offset%"+"%info_ext%"
   WRITE_LONG  0xc4  "%automap_offset%"
 END

 PATCH_IF ("%projectile_traps_offset%">"%actors_offset%")
 OR (("%projectile_traps_offset%" == "%actors_offset%") AND ("%actors_num%" == 0))
 BEGIN
   "projectile_traps_offset"="%projectile_traps_offset%"+"%info_ext%"
   	 WRITE_LONG  0xcc  "%projectile_traps_offset%"
   END

BUT_ONLY

COPY_EXISTING ~%AR12%.ARE~ ~override~
SET ~container_to_add_to~ = 2
SPRINT ~item_to_add~ ~MISC07~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

SET ~container_to_add_to~ = 2
SPRINT ~item_to_add~ ~MA1SW02~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

BUT_ONLY

COPY_EXISTING ~%AR13%.ARE~ ~override~
SPRINT ~old_item~ ~STAF01~
SPRINT ~new_item~ ~STAF02~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~REPLACE_AREA_ITEM~

SET ~container_to_add_to~ = 1
SPRINT ~item_to_add~ ~MABULL01~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

SET ~container_to_add_to~ = 2
SPRINT ~item_to_add~ ~CMLEAT5~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

SET ~container_to_add_to~ = 2
SPRINT ~item_to_add~ ~MA2SW01~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~
BUT_ONLY


COPY_EXISTING ~%AR14%.ARE~ ~override~
SET ~container_to_add_to~ = 1
SPRINT ~item_to_add~ ~MACMLE01~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

SET ~container_to_add_to~ = 1
SPRINT ~item_to_add~ ~MHALB01~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~

SET ~container_to_add_to~ = 1
SPRINT ~item_to_add~ ~MACMBL01~
SET ~charges1~ = 0
SET ~charges2~ = 0
SET ~charges3~ = 0
LAUNCH_PATCH_MACRO ~ADD_AREA_ITEM~
BUT_ONLY

//COPY ~DarkHorizons\areasx~ ~override~



// New / Implement use of unused items/CMKEY01.itm/CMKEY03.itm


COPY_EXISTING ~cm3374.are~ ~override~
		LPF ALTER_AREA_CONTAINER
			INT_VAR
			flag_mlocked  = 1
			lock_difficulty  = 100
			break_difficulty  = 100
			//lockpick_strref  = ~23173~
			STR_VAR
			container_name = ~Container 9~
			container_key  = ~CMKEY01~
			//container_script = ~CMJOLock~
		END

COPY_EXISTING ~cm3370.are~ ~override~
		LPF ALTER_AREA_DOOR
			INT_VAR
			flag_locked   = 1
			flag_uses_key = 1
			flag_detected = 1
			STR_VAR
			door_name = ~Door0511~
			door_key   = ~CMKEY03~
		END

COPY_EXISTING ~DarkHorizons\areas\CM0750.are~ ~override~
		LPF ALTER_AREA_CONTAINER
			INT_VAR
			lock_difficulty  = 90
			STR_VAR
			container_name = ~Container 2~
		END

/*  Commented out until changes are validated or not (creature CMGHST07.cre/CM2680.ar)

- Add an existing mod creature not implemented [(A ghost mage in CM2680)](https://forums.beamdog.com/discussion/comment/1209318/#Comment_1209318))
	
COPY_EXISTING ~CM2680.are~ ~override~
	WRITE_ASCII 0x94 ~CM2680~ (8)
	
	
*/


/* Begin item copying */

/* ****************************** Gear ************************* */

/* Armor **** */

COPY ~DarkHorizons/items/CMARQ01.ITM~ ~override~
  SAY NAME1 @10
  SAY NAME2 @11
  SAY 0x50 @12
  SAY 0x54 @13

COPY ~DarkHorizons/%ItemsFolder%/CMARQ02.ITM~ ~override~
  SAY NAME1 @14
  SAY NAME2 @15
  SAY 0x50 @16
  SAY 0x54 @17

COPY ~DarkHorizons/%ItemsFolder%/CMARQ03.ITM~ ~override~
  SAY NAME1 @18
  SAY NAME2 @19
  SAY 0x50 @20
  SAY 0x54 @21

COPY ~DarkHorizons/%ItemsFolder%/CMARQ04.ITM~ ~override~
  SAY NAME1 @18
  SAY NAME2 @22
  SAY 0x50 @20
  SAY 0x54 @23

COPY ~DarkHorizons/items/CMARQ05.itm~ ~override~
  SAY NAME1 @18
  SAY NAME2 @24
  SAY 0x50 @25
  SAY 0x54 @26

COPY ~DarkHorizons/%ItemsFolder%/CMARQ06.itm~ ~override~
  SAY NAME1 @27
  SAY NAME2 @28
  SAY 0x50 @29
  SAY 0x54 @30

COPY ~DarkHorizons/items/CMARQ07.itm~ ~override~
  SAY NAME1 @18
  SAY NAME2 @31
  SAY 0x50 @25
  SAY 0x54 @32

COPY ~DarkHorizons/%ItemsFolder%/CMARQ08.itm~ ~override~
  SAY NAME1 @18
  SAY NAME2 @33
  SAY 0x50 @25
  SAY 0x54 @34

COPY ~DarkHorizons/items/CMARQ09.itm~ ~override~
  SAY NAME1 @35
  SAY NAME2 @36
  SAY 0x50 @37
  SAY 0x54 @38

COPY ~DarkHorizons/items/CMARQ10.itm~ ~override~
  SAY NAME1 @18
  SAY NAME2 @39
  SAY 0x50 @25
  SAY 0x54 @40

/* ---------- Version 2.00 Additions ------------ */

COPY ~DarkHorizons/items/CMARQ11.itm~ ~override~
  SAY NAME1 @27
  SAY NAME2 @827
  SAY 0x50 @29
  SAY 0x54 @29

COPY ~DarkHorizons/%ItemsFolder%/CMARQ12.itm~ ~override~
  SAY NAME1 @14
  SAY NAME2 @828
  SAY 0x50 @26
  SAY 0x54 @829

/* --------------------------------------     */

COPY ~DarkHorizons/items/CMCHAN01.ITM~ ~override~
  SAY NAME1 @41
  SAY NAME2 @42
  SAY 0x50 @43
  SAY 0x54 @44

COPY ~DarkHorizons/items/CMCHAN02.ITM~ ~override~
  SAY NAME1 @41
  SAY NAME2 @45
  SAY 0x50 @46
  SAY 0x54 @47

COPY ~DarkHorizons/items/CMCHAN03.itm~ ~override~
  SAY NAME1 @41
  SAY NAME2 @48
  SAY 0x50 @49
  SAY 0x54 @50

COPY ~DarkHorizons/items/CMCHAN04.itm~ ~override~
  SAY NAME1 @41
  SAY NAME2 @51
  SAY 0x50 @49
  SAY 0x54 @52

COPY ~DarkHorizons/items/CMCHAN05.itm~ ~override~
  SAY NAME1 @41
  SAY NAME2 @53
  SAY 0x50 @49
  SAY 0x54 @54

COPY ~DarkHorizons/items/CMCHAN07.itm~ ~override~
  SAY NAME1 @35
  SAY NAME2 @55
  SAY 0x50 @37
  SAY 0x54 @56

COPY ~DarkHorizons/items/CMLEAT1.ITM~ ~override~
  SAY NAME1 @18
  SAY NAME2 @57
  SAY 0x50 @58
  SAY 0x54 @59

COPY ~DarkHorizons/%ItemsFolder%/CMLEAT2.itm~ ~override~
  SAY NAME1 @60
  SAY NAME2 @61
  SAY 0x50 @62
  SAY 0x54 @63

COPY ~DarkHorizons/%ItemsFolder%/CMLEAT3.itm~ ~override~
  SAY NAME1 @18
  SAY NAME2 @39
  SAY 0x50 @64
  SAY 0x54 @65

COPY ~DarkHorizons/%ItemsFolder%/CMLEAT4.ITM~ ~override~
  SAY NAME1 @18
  SAY NAME2 @66
  SAY 0x50 @67
  SAY 0x54 @68
  SAY 0x286 @69

COPY ~DarkHorizons/%ItemsFolder%/CMLEAT5.ITM~ ~override~
  SAY NAME1 @70
  SAY NAME2 @71
  SAY 0x50 @72
  SAY 0x54 @73

COPY ~DarkHorizons/%ItemsFolder%/cmleat6.itm~ ~override~
  SAY NAME1 @70
  SAY NAME2 @74
  SAY 0x50 @72
  SAY 0x54 @75

COPY ~DarkHorizons/items/CMPLAT03.ITM~ ~override~
  SAY NAME1 @10
  SAY NAME2 @76
  SAY 0x50 @77
  SAY 0x54 @78

COPY ~DarkHorizons/items/CMPLAT04.ITM~ ~override~
  SAY NAME1 @10
  SAY NAME2 @79
  SAY 0x50 @80
  SAY 0x54 @81

COPY ~DarkHorizons/items/CMPLAT05.itm~ ~override~
  SAY NAME1 @27
  SAY NAME2 @82
  SAY 0x50 @29
  SAY 0x54 @83

COPY ~DarkHorizons/items/CMPLAT07.itm~ ~override~
  SAY NAME1 @27
  SAY NAME2 @84
  SAY 0x50 @29
  SAY 0x54 @85

COPY ~DarkHorizons/items/CMPLAT10.itm~ ~override~

  SAY NAME1 @10
  SAY NAME2 @86
  SAY 0x50 @87
  SAY 0x54 @88

COPY ~DarkHorizons/%ItemsFolder%/CMPLAT11.itm~ ~override~
  SAY NAME1 @27
  SAY NAME2 @89
  SAY 0x50 @29
  SAY 0x54 @90

/*  Belts **** */

COPY ~DarkHorizons/items/cmbelt02.itm~ ~override~
  SAY NAME1 @91
  SAY NAME2 @92
  SAY 0x50 @93
  SAY 0x54 @94

COPY ~DarkHorizons/items/CMBEQ01.itm~ ~override~
  SAY NAME1 @91
  SAY NAME2 @95
  SAY 0x50 @93
  SAY 0x54 @96

COPY ~DarkHorizons/items/CMBEQ02.itm~ ~override~
  SAY NAME1 @91
  SAY NAME2 @97
  SAY 0x50 @93
  SAY 0x54 @98

/*  Boots **** */

COPY ~DarkHorizons/items/CMBOOT01.itm~ ~override~
  SAY NAME1 @99
  SAY NAME2 @100
  SAY 0x50 @101
  SAY 0x54 @102

COPY ~DarkHorizons/items/cmboot03.itm~ ~override~
   SAY NAME1 @99
   SAY NAME2  @103
   SAY 0x50 @101
   SAY 0x54 @104

COPY ~DarkHorizons/items/CMBTQ01.itm~ ~override~
  SAY NAME1 @105
  SAY NAME2 @106
  SAY 0x50 @101
  SAY 0x54 @107

COPY ~DarkHorizons/items/CMBTQ02.itm~ ~override~
  SAY NAME1 @99
  SAY NAME2 @108
  SAY 0x50 @101
  SAY 0x54 @109


/* Cloaks **** */

COPY ~DarkHorizons/items/CMCLCK02.ITM~ ~override~
  SAY NAME1 @755
  SAY NAME2 @110
  SAY 0x50 @756
  SAY 0x54 @111

COPY ~DarkHorizons/items/CMCLCK03.ITM~ ~override~
  SAY NAME1 @112
  SAY NAME2 @113
  SAY 0x50 @114
  SAY 0x54 @115

COPY ~DarkHorizons/items/CMCLCK04.itm~ ~override~
  SAY NAME1 @116
  SAY NAME2 @117
  SAY 0x50 @118
  SAY 0x54 @119

COPY ~DarkHorizons/items/CMCLCK05.ITM~ ~override~
  SAY NAME1 @116
  SAY NAME2 @120
  SAY 0x50 @118
  SAY 0x54 @121

/* Version 2.00 addition */

COPY ~DarkHorizons/items/CMCLCK07.itm~ ~override~
  SAY NAME1 @112
  SAY NAME2 @820
  SAY 0x50 @114
  SAY 0x54 @821
/* ------------------ */

COPY ~DarkHorizons/items/CMCLQ01.itm~ ~override~
  SAY NAME1 @112
  SAY NAME2 @122
  SAY 0x50 @123
  SAY 0x54 @124



/*  Gloves **** */

COPY ~DarkHorizons/%ItemsFolder%/CMBRAC01.itm~ ~override~
  SAY NAME1 @125
  SAY NAME2 @126
  SAY 0x50 @127
  SAY 0x54 @128

COPY ~DarkHorizons/%ItemsFolder%/CMBRAC04.itm~ ~override~
  SAY NAME1 @129
  SAY NAME2 @130
  SAY 0x50 @131
  SAY 0x54 @132

COPY ~DarkHorizons/%ItemsFolder%/CMBRQ01.itm~ ~override~
  SAY NAME1 @129
  SAY NAME2 @133
  SAY 0x50 @134
  SAY 0x54 @135

COPY ~DarkHorizons/%ItemsFolder%/CMBRQ02.itm~ ~override~
  SAY NAME1 @129
  SAY NAME2 @136
  SAY 0x50 @134
  SAY 0x54 @137

COPY ~DarkHorizons/%ItemsFolder%/CMBRQ03.itm~ ~override~
  SAY NAME1 @129
  SAY NAME2 @138
  SAY 0x50 @131
  SAY 0x54 @139

COPY ~DarkHorizons/items/CMBRQ04.ITM~ ~override~
  SAY NAME1 @129
  SAY NAME2 @140
  SAY 0x50 @131
  SAY 0x54 @141

COPY ~DarkHorizons/%ItemsFolder%/CMBRQ05.itm~ ~override~
  SAY NAME1 @125
  SAY NAME2 @142
  SAY 0x50 @127
  SAY 0x54 @143

COPY ~DarkHorizons/%ItemsFolder%/CMBRQ06.itm~ ~override~
  SAY NAME1 @125
  SAY NAME2 @144
  SAY 0x50 @127
  SAY 0x54 @145

/* Helms **** */

COPY ~DarkHorizons/%ItemsFolder%/CMHELM01.itm~ ~override~
  SAY NAME1 @146
  SAY NAME2 @147
  SAY 0x50 @148
  SAY 0x54 @149

COPY ~DarkHorizons/%ItemsFolder%/CMHELM02.ITM~ ~override~
  SAY NAME1 @146
  SAY NAME2 @150
  SAY 0x50 @148
  SAY 0x54 @151

COPY ~DarkHorizons/%ItemsFolder%/CMHELM03.ITM~ ~override~
  SAY NAME1 @152
  SAY NAME2 @153
  SAY 0x50 @154
  SAY 0x54 @155

COPY ~DarkHorizons/%ItemsFolder%/cmhelm04.itm~ ~override~
  SAY NAME1 @146
  SAY NAME2 @156
  SAY 0x50 @157
  SAY 0x54 @158

COPY ~DarkHorizons/items/CMHMQ01.ITM~ ~override~
  SAY NAME1 @146
  SAY NAME2 @159
  SAY 0x50 @160
  SAY 0x54 @161

COPY ~DarkHorizons/items/CMHMQ02.itm~ ~override~
  SAY NAME1 @146
  SAY NAME2 @162
  SAY 0x50 @148
  SAY 0x54 @163

COPY ~DarkHorizons/items/CMHMQ03.itm~ ~override~
  SAY NAME1 @146
  SAY NAME2 @164
  SAY 0x50 @148
  SAY 0x54 @165

/* ---------- Version 2.00 Additions ------------ */

COPY ~DarkHorizons/items/CMHMQ04.itm~ ~override~
  SAY NAME1 @146
  SAY NAME2 @836
  SAY 0x50 @148
  SAY 0x54 @148

/* --------------------------------------     */

/* Shields **** */

COPY ~DarkHorizons/%ItemsFolder%/CMSHLD01.ITM~ ~override~
  SAY NAME1 @166
  SAY NAME2 @167
  SAY 0x50 @168
  SAY 0x54 @169

COPY ~DarkHorizons/%ItemsFolder%/CMSHLD03.ITM~ ~override~
  SAY NAME1 @170
  SAY NAME2 @171
  SAY 0x50 @172
  SAY 0x54 @173
  SAY 0x1F6 @174

COPY ~DarkHorizons/%ItemsFolder%/CMSHLD04.itm~ ~override~
  SAY NAME1 @175
  SAY NAME2 @176
  SAY 0x50 @177
  SAY 0x54 @178

COPY ~DarkHorizons/%ItemsFolder%/CMSHLD05.itm~ ~override~
  SAY NAME1 @166
  SAY NAME2 @179
  SAY 0x50 @168
  SAY 0x54 @180

COPY ~DarkHorizons/%ItemsFolder%/CMSHQ01.itm~ ~override~
  SAY NAME1 @170
  SAY NAME2 @181
  SAY 0x50 @172
  SAY 0x54 @182

/* ---------- Version 2.00 Additions ------------ */

COPY ~DarkHorizons/%ItemsFolder%/CMSHQ02.itm~ ~override~
  SAY NAME1 @166
  SAY NAME2 @837
  SAY 0x50 @168
  SAY 0x54 @168

/* --------------------------------------     */

 /* ************************ Weapons ******************* */

 /* Arrows **** */

COPY ~DarkHorizons/items/CMAROW03.itm~ ~override~
  SAY NAME1 @183
  SAY NAME2 @184
  SAY 0x50 @185
  SAY 0x54 @186

COPY ~DarkHorizons/items/CMAARQ01.ITM~ ~override~
  SAY NAME1 @187
  SAY NAME2 @188
  SAY 0x50 @185
  SAY 0x54 @189

/* Axes **** */

COPY ~DarkHorizons/items/CMAX01.itm~ ~override~
  SAY NAME1 @190
  SAY NAME2 @191
  SAY 0x50 @192
  SAY 0x54 @193

COPY ~DarkHorizons/items/CMAX02.itm~ ~override~
  SAY NAME1 @194
  SAY NAME2 @195
  SAY 0x50 @196
  SAY 0x54 @197

COPY ~DarkHorizons/items/CMAX03.itm~ ~override~
  SAY NAME1 @194
  SAY NAME2 @195
  SAY 0x50 @198
  SAY 0x54 @199

COPY ~DarkHorizons/items/CMAX04.itm~ ~override~
  SAY NAME1 @200
  SAY NAME2 @201
  SAY 0x50 @202
  SAY 0x54 @203

COPY ~DarkHorizons/items/CMAX05.itm~ ~override~
  SAY NAME1 @200
  SAY NAME2 @204
  SAY 0x50 @205
  SAY 0x54 @206

/* Blunt **** */

COPY ~DarkHorizons/items/CMBLUN01.ITM~ ~override~
  SAY NAME1 @207
  SAY NAME2 @208
  SAY 0x50 @209
  SAY 0x54 @210

COPY ~DarkHorizons/items/CMBLUN02.itm~ ~override~
  SAY NAME1 @211
  SAY NAME2 @212
  SAY 0x50 @213
  SAY 0x54 @214

COPY ~DarkHorizons/items/CMBLUN03.itm~ ~override~
  SAY NAME1 @757
  SAY NAME2 @215
  SAY 0x50 @758
  SAY 0x54 @216

COPY ~DarkHorizons/%ItemsFolder%/CMBLUN04.ITM~ ~override~
  SAY NAME1 @217
  SAY NAME2 @218
  SAY 0x50 @219
  SAY 0x54 @220

COPY ~DarkHorizons/items/CMBLUN05.ITM~ ~override~
  SAY NAME1 @221
  SAY NAME2 @222
  SAY 0x50 @223
  SAY 0x54 @224

COPY ~DarkHorizons/%ItemsFolder%/CMFLQ01.itm~ ~override~
  SAY NAME1 @221
  SAY NAME2 @225
  SAY 0x50 @226
  SAY 0x54 @227

COPY ~DarkHorizons/items/CMHAMM01.itm~ ~override~
  SAY NAME1 @228
  SAY NAME2 @229
  WRITE_LONG 0x34 12000 // Store price
  SAY 0x50 @230
  SAY 0x54 @231

COPY ~DarkHorizons/items/CMHAMM02.itm~ ~override~
  SAY NAME1 @232
  SAY NAME2 @233
  SAY 0x50 @234
  SAY 0x54 @235

COPY ~DarkHorizons/items/CMHAMM03.ITM~ ~override~
  SAY NAME1 @232
  SAY NAME2 @236
  WRITE_LONG 0x34 10000 // Store price
  SAY 0x50 @237
  SAY 0x54 @238

/* ---------- Version 2.00 Additions ------------ */

COPY ~DarkHorizons/items/CMHAMM04.itm~ ~override~
  SAY NAME1 @232
  SAY NAME2 @838
  SAY 0x50 @234
  SAY 0x54 @839

/* --------------------------------------     */

COPY ~DarkHorizons/items/CMHAQ01.ITM~ ~override~
  SAY NAME1 @232
  SAY NAME2 @239
  SAY 0x50 @237
  SAY 0x54 @240

COPY ~DarkHorizons/%ItemsFolder%/CMHAQ02.itm~ ~override~
  SAY NAME1 @232
  SAY NAME2 @241
  SAY 0x50 @242
  SAY 0x54 @243

COPY ~DarkHorizons/%ItemsFolder%/CMMSQ01.ITM~ ~override~
  SAY NAME1 @211
  SAY NAME2 @244
  SAY 0x50 @213
  SAY 0x54 @245

COPY ~DarkHorizons/items/CMMSQ02.itm~ ~override~
  SAY NAME1 @207
  SAY NAME2 @246
  SAY 0x50 @209
  SAY 0x54 @247

/* Bows **** */

COPY ~DarkHorizons/%ItemsFolder%/CMBOW01.itm~ ~override~
  SAY NAME1 @248
  SAY NAME2 @249
  SAY 0x50 @250
  SAY 0x54 @251

COPY ~DarkHorizons/items/CMBOW02.ITM~ ~override~
  SAY NAME1 @248
  SAY NAME2 @252
  SAY 0x50 @250
  SAY 0x54 @253

COPY ~DarkHorizons/items/CMBOW03.ITM~ ~override~
  SAY NAME1 @254
  SAY NAME2 @255
  SAY 0x50 @256
  SAY 0x54 @257

/* ---------- Version 2.00 Additions ------------ */

COPY ~DarkHorizons/%ItemsFolder%/CMBOW04.itm~ ~override~
  SAY NAME1 @248
  SAY NAME2 @834
  SAY 0x50 @250
  SAY 0x54 @835

/* --------------------------------------     */

COPY ~DarkHorizons/items/CMBWQ01.itm~ ~override~
  SAY NAME1 @254
  SAY NAME2 @258
  SAY 0x50 @259
  SAY 0x54 @260

COPY ~DarkHorizons/items/CMBWQ02.itm~ ~override~
  SAY NAME1 @248
  SAY NAME2 @261
  SAY 0x50 @262
  SAY 0x54 @263

COPY ~DarkHorizons/items/CMBWQ03.itm~ ~override~
  SAY NAME1 @264
  SAY NAME2 @265
  SAY 0x50 @266
  SAY 0x54 @267

COPY ~DarkHorizons/items/CMBWQ04.itm~ ~override~
  SAY NAME1 @268
  SAY NAME2 @269
  SAY 0x50 @270
  SAY 0x54 @271

COPY ~DarkHorizons/%ItemsFolder%/CMXBOW01.itm~ ~override~
  SAY NAME1 @264
  SAY NAME2 @272
  SAY 0x50 @273
  SAY 0x54 @274

/* Bullets **** */

COPY ~DarkHorizons/items/cmbul02.itm~ ~override~
  SAY NAME1 @275
  SAY NAME2 @276
  SAY 0x50 @277
  SAY 0x54 @278

COPY ~DarkHorizons/items/CMBUQ01.itm~ ~override~
  SAY NAME1 @275
  SAY NAME2 @279
  SAY 0x50 @280
  SAY 0x54 @281

COPY ~DarkHorizons/items/CMBUQ02.itm~ ~override~
  SAY NAME1 @275
  SAY NAME2 @282
  SAY 0x50 @277
  SAY 0x54 @283

COPY ~DarkHorizons/items/CMBUQ03.itm~ ~override~
  SAY NAME1 @275
  SAY NAME2 @284
  SAY 0x50 @277
  SAY 0x54 @285

/* Daggers **** */

COPY ~DarkHorizons/items/CMDAGG01.ITM~ ~override~
  SAY NAME1 @286
  SAY NAME2 @287
  SAY 0x50 @288
  SAY 0x54 @289

COPY ~DarkHorizons/items/cmdagg02.itm~ ~override~
  SAY NAME1 @286
  SAY NAME2 @290
  SAY 0x50 @291
  SAY 0x54 @292

/* Version 2.00 addition */

COPY ~DarkHorizons/items/CMDAGG03.itm~ ~override~
  SAY NAME1 @286
  SAY NAME2 @824
  SAY 0x50 @291
  SAY 0x54 @299

COPY ~DarkHorizons/items/CMDAGG04.itm~ ~override~
  SAY NAME1 @286
  SAY NAME2 @825
  SAY 0x50 @291
  SAY 0x54 @826
/* ------------------ */

COPY ~DarkHorizons/items/CMDAQ01.itm~ ~override~
  SAY NAME1 @286
  SAY NAME2 @293
  SAY 0x50 @291
  SAY 0x54 @294

COPY ~DarkHorizons/items/CMDAQ02.itm~ ~override~
  SAY NAME1 @286
  SAY NAME2 @295
  SAY 0x50 @291
  SAY 0x54 @296

COPY ~DarkHorizons/%ItemsFolder%/CMDAQ03.ITM~ ~override~
  SAY NAME1 @286
  SAY NAME2 @297
  SAY 0x50 @298
  SAY 0x54 @299

COPY ~DarkHorizons/items/CMDAQ04.itm~ ~override~
  SAY NAME1 @286
  SAY NAME2 @300
  SAY 0x50 @291
  SAY 0x54 @301

COPY ~DarkHorizons/items/CMDAQ05.itm~ ~override~
  SAY NAME1 @302
  SAY NAME2 @303
  SAY 0x50 @304
  SAY 0x54 @305

/* Halberds and Spears **** */

COPY ~DarkHorizons/items/CMSPQ01.itm~ ~override~
  SAY NAME1 @306
  SAY NAME2 @307
  SAY 0x50 @308
  SAY 0x54 @309

COPY ~DarkHorizons/%ItemsFolder%/CMSPQ02.itm~ ~override~
  SAY NAME1 @306
  SAY NAME2 @310
  SAY 0x50 @308
  SAY 0x54 @311

COPY ~DarkHorizons/items/CMSPQ03.itm~ ~override~
  SAY NAME1 @306
  SAY NAME2 @312
  SAY 0x50 @308
  SAY 0x54 @313

/* Slings **** */

COPY ~DarkHorizons/items/CMSLQ01.itm~ ~override~
  SAY NAME1 @314
  SAY NAME2 @315
  SAY 0x50 @316
  SAY 0x54 @317

/* Version 2.00 addition */

COPY ~DarkHorizons/items/CMSLQ02.itm~ ~override~
  SAY NAME1 @314
  SAY NAME2 @822
  SAY 0x50 @316
  SAY 0x54 @823

/*    ------------------         */

/* Staves **** */

COPY ~DarkHorizons/items/CMSTAF01.ITM~ ~override~
	SAY NAME1 @759
  SAY NAME2 @318
  SAY 0x50 @760
  SAY 0x54 @319

COPY ~DarkHorizons/items/CMSTQ01.ITM~ ~override~
  SAY NAME1 @320
  SAY NAME2 @321
  SAY 0x50 @322
  SAY 0x54 @323

COPY ~DarkHorizons/%ItemsFolder%/CMSTQ02.itm~ ~override~
  SAY NAME1 @324
  SAY NAME2 @325
  SAY 0x50 @326
  SAY 0x54 @327

COPY ~DarkHorizons/%ItemsFolder%/CMSTQ03.itm~ ~override~
  SAY NAME1 @324
  SAY NAME2 @328
  SAY 0x50 @329
  SAY 0x54 @330

COPY ~DarkHorizons/%ItemsFolder%/CMSTQ04.itm~ ~override~
  SAY NAME1 @324
  SAY NAME2 @331
  SAY 0x50 @332
  SAY 0x54 @333

COPY ~DarkHorizons/%ItemsFolder%/CMSTQ05.itm~ ~override~
  SAY NAME1 @324
  SAY NAME2 @334
  SAY 0x50 @332
  SAY 0x54 @335

COPY ~DarkHorizons/items/CMSTQ06.itm~ ~override~
  SAY NAME1 @324
  SAY NAME2 @336
  SAY 0x50 @332
  SAY 0x54 @337

/* Swords **** */

COPY ~DarkHorizons/%ItemsFolder%/CMS1H01.itm~ ~override~
  SAY NAME1 @338
  SAY NAME2 @339
  SAY 0x50 @340
  SAY 0x54 @341

COPY ~DarkHorizons/items/CMS1H03.ITM~ ~override~
  SAY NAME1 @342
  SAY NAME2 @343
  SAY 0x50 @344
  SAY 0x54 @345

COPY ~DarkHorizons/items/CMS1H04.itm~ ~override~
  SAY NAME1 @346
  SAY NAME2 @347
  SAY 0x50 @348
  SAY 0x54 @349

COPY ~DarkHorizons/items/CMS1H05.itm~ ~override~
  SAY NAME1 @338
  SAY NAME2 @350
  SAY 0x50 @340
  SAY 0x54 @351

COPY ~DarkHorizons/%ItemsFolder%/CMS1H07.itm~ ~override~
  SAY NAME1 @338
  SAY NAME2 @352
  SAY 0x50 @340
  SAY 0x54 @353

ACTION_IF (GAME_IS ~bg2ee eet~) BEGIN

PRINT ~Item restricted to Nikita for EE~
OUTER_SET CM_S1H07 = RESOLVE_STR_REF (@934)
OUTER_SET use_her = RESOLVE_STR_REF (@910)
APPEND ~ITEM_USE.2DA~ ~CMS1H07   CMTNIKIT      %CM_S1H07%      2           %use_her%~ UNLESS ~CMS1H07~

END ELSE ACTION_IF (GAME_IS ~bg2 bgt~ AND MOD_IS_INSTALLED ~SETUP-TOBEX.TP2~ ~100~) BEGIN

PRINT ~Item restricted to Nikita for bg2~
OUTER_SET CM_S1H07 = RESOLVE_STR_REF (@934)
APPEND ~ITEM_USE.2DA~ ~CMS1H07   CMTNIKIT      -1      2          %CM_S1H07%~ UNLESS ~CMS1H07~

END

COPY ~DarkHorizons/%ItemsFolder%/CMS1H08.itm~ ~override~
  SAY NAME1 @338
  SAY NAME2 @354
  SAY 0x50 @355
  SAY 0x54 @356

COPY ~DarkHorizons/items/CMS1H09.itm~ ~override~
  SAY NAME1 @346
  SAY NAME2 @357
  SAY 0x50 @358
  SAY 0x54 @359

/* ---------- Version 2.00 Additions ------------ */

COPY ~DarkHorizons/items/CMS1H10.itm~ ~override~
  SAY NAME1 @338
  SAY NAME2 @830
  SAY 0x50 @340
  SAY 0x54 @831

COPY ~DarkHorizons/items/CMS1H11.itm~ ~override~
  SAY NAME1 @338
  SAY NAME2 @832
  SAY 0x50 @340
  SAY 0x54 @833

/* --------------------------------------     */

COPY ~DarkHorizons/items/CMSWQ01.itm~ ~override~
  SAY NAME1 @360
  SAY NAME2 @361
  SAY 0x50 @362
  SAY 0x54 @363

COPY ~DarkHorizons/items/CMSWQ02.itm~ ~override~
  SAY NAME1 @364
  SAY NAME2 @365
  SAY 0x50 @366
  SAY 0x54 @367

COPY ~DarkHorizons/items/CMSWQ03.itm~ ~override~
  SAY NAME1 @342
  SAY NAME2 @368
  SAY 0x50 @369
  SAY 0x54 @370

COPY ~DarkHorizons/items/CMSWQ04.itm~ ~override~
  SAY NAME1 @346
  SAY NAME2 @371
  SAY 0x50 @372
  SAY 0x54 @373

COPY ~DarkHorizons/items/CMSWQ05.itm~ ~override~
  SAY NAME1 @346
  SAY NAME2 @374
  SAY 0x50 @375
  SAY 0x54 @376

COPY ~DarkHorizons/items/CMSWQ06.itm~ ~override~
  SAY NAME1 @346
  SAY NAME2 @377
  SAY 0x50 @375
  SAY 0x54 @378

COPY ~DarkHorizons/items/CMSWQ07.itm~ ~override~
  SAY NAME1 @346
  SAY NAME2 @379
  SAY 0x50 @375
  SAY 0x54 @380

COPY ~DarkHorizons/%ItemsFolder%/CMSWQ08.itm~ ~override~
  SAY NAME1 @364
  SAY NAME2 @381
  SAY 0x50 @382
  SAY 0x54 @383

COPY ~DarkHorizons/items/CMSWQ09.itm~ ~override~
  SAY NAME1 @338
  SAY NAME2 @384
  SAY 0x50 @340
  SAY 0x54 @385
  SAY 0x1FE @174

COPY ~DarkHorizons/items/CMSWQ10.itm~ ~override~
  SAY NAME1 @338
  SAY NAME2 @386
  SAY 0x50 @340
  SAY 0x54 @387

COPY ~DarkHorizons/items/CMSWQ11.itm~ ~override~
  SAY NAME1 @342
  SAY NAME2 @388
  SAY 0x50 @389
  SAY 0x54 @390

COPY ~DarkHorizons/%ItemsFolder%/CMSWQ12.itm~ ~override~
  SAY NAME1 @342
  SAY NAME2 @391
  SAY 0x50 @392
  SAY 0x54 @393

COPY ~DarkHorizons/%ItemsFolder%/CMSWQ14.itm~ ~override~
  SAY NAME1 @338
  SAY NAME2 @398
  SAY 0x50 @340
  SAY 0x54 @399

COPY ~DarkHorizons/items/CMSWQ15.itm~ ~override~
  SAY NAME1 @338
  SAY NAME2 @400
  SAY 0x50 @401
  SAY 0x54 @402

COPY ~DarkHorizons/items/CMSWQ16.itm~ ~override~
  SAY NAME1 @403
  SAY NAME2 @404
  SAY 0x50 @405
  SAY 0x54 @406

COPY ~DarkHorizons/items/CMSWQ17.itm~ ~override~
  SAY NAME1 @364
  SAY NAME2 @407
  SAY 0x50 @408
  SAY 0x54 @409

/* ********************* Jewelry ************************* */

/* Amulets **** */

COPY ~DarkHorizons/items/CMAMQ01.ITM~ ~override~
  SAY NAME1 @410
  SAY NAME2 @411
  SAY 0x50 @412
  SAY 0x54 @413

COPY ~DarkHorizons/items/CMAMQ02.itm~ ~override~
  SAY NAME1 @414
  SAY NAME2 @415
  SAY 0x50 @416
  SAY 0x54 @417

COPY ~DarkHorizons/items/CMAMQ03.ITM~ ~override~
  SAY NAME1 @418
  SAY NAME2 @419
  SAY 0x50 @420
  SAY 0x54 @421

COPY ~DarkHorizons/items/CMAMUL01.ITM~ ~override~
  SAY NAME1 @410
  SAY NAME2 @422
  SAY 0x50 @412
  SAY 0x54 @423

COPY ~DarkHorizons/items/CMAMUL02.ITM~ ~override~
  SAY NAME1 @414
  SAY NAME2 @424
  SAY 0x50 @425
  SAY 0x54 @426

COPY ~DarkHorizons/items/CMAMUL03.ITM~ ~override~
  SAY NAME1 @410
  SAY NAME2 @427
  SAY 0x50 @428
  SAY 0x54 @429

COPY ~DarkHorizons/items/CMAMUL04.ITM~ ~override~
  SAY NAME1 @414
  SAY NAME2 @430
  SAY 0x50 @416
  SAY 0x54 @431

COPY ~DarkHorizons/items/CMAMUL05.ITM~ ~override~
  SAY NAME1 @410
  SAY NAME2 @432
  SAY 0x50 @428
  SAY 0x54 @433

/* Rings **** */

COPY ~DarkHorizons/items/CMRING01.ITM~ ~override~
  SAY NAME1 @434
  SAY NAME2 @435
  SAY 0x50 @436
  SAY 0x54 @437

COPY ~DarkHorizons/items/CMRING02.ITM~ ~override~
  SAY NAME1 @434
  SAY NAME2 @438
  SAY 0x50 @436
  SAY 0x54 @439

COPY ~DarkHorizons/%ItemsFolder%/cmring03.itm~ ~override~
  SAY NAME1 @761
  SAY NAME2 @440
  SAY 0x50 @762
  SAY 0x54 @441

COPY ~DarkHorizons/items/cmring04.itm~ ~override~
  SAY NAME1 @434
  SAY NAME2 @442
  SAY 0x50 @436
  SAY 0x54 @443

COPY ~DarkHorizons/items/CMRING05.ITM~ ~override~
  SAY NAME1 @434
  SAY NAME2 @444
  SAY 0x50 @436
  SAY 0x54 @445

COPY ~DarkHorizons/items/CMRIQ01.ITM~ ~override~
  SAY NAME1 @434
  SAY NAME2 @446
  SAY 0x50 @436
  SAY 0x54 @447

COPY ~DarkHorizons/items/CMRIQ02.ITM~ ~override~
  SAY NAME1 @434
  SAY NAME2 @448
  SAY 0x50 @436
  SAY 0x54 @449

COPY ~DarkHorizons/%ItemsFolder%/CMRIQ03.itm~ ~override~
  SAY NAME1 @434
  SAY NAME2 @450
  SAY 0x50 @436
  SAY 0x54 @451

COPY ~DarkHorizons/items/CMRIQ04.itm~ ~override~
  SAY NAME1 @434
  SAY NAME2 @452
  SAY 0x50 @453
  SAY 0x54 @454

COPY ~DarkHorizons/%ItemsFolder%/CMRIQ05.itm~ ~override~
  SAY NAME1 @434
  SAY NAME2 @455
  SAY 0x50 @436
  SAY 0x54 @456

COPY ~DarkHorizons/%ItemsFolder%/CMRIQ06.itm~ ~override~
  SAY NAME1 @434
  SAY NAME2 @457
  SAY 0x50 @436
  SAY 0x54 @458

COPY ~DarkHorizons/%ItemsFolder%/CMRIQ07.itm~ ~override~
  SAY NAME1 @434
  SAY NAME2 @459
  SAY 0x50 @436
  SAY 0x54 @460

/* **************************** Scrolls ************************ */

COPY ~DarkHorizons/items/CMBSCR1.ITM~ ~override~
  SAY NAME1 @461
  SAY NAME2 @461
  SAY 0x50 @462

COPY ~DarkHorizons/items/SCRSEC1.itm~ ~override~
  SAY NAME1 @461
  SAY NAME2 @461
  SAY 0x50 @463

COPY ~DarkHorizons/items/SCRSEC2.itm~ ~override~
  SAY NAME1 @461
  SAY NAME2 @461
  SAY 0x50 @464

COPY ~DarkHorizons/items/SCRSEC3.itm~ ~override~
  SAY NAME1 @461
  SAY NAME2 @461
  SAY 0x50 @465

COPY ~DarkHorizons/items/SCRSEC4.itm~ ~override~
  SAY NAME1 @461
  SAY NAME2 @461
  SAY 0x50 @466

COPY ~DarkHorizons/items/SCRSEC5.itm~ ~override~
  SAY NAME1 @461
  SAY NAME2 @461
  SAY 0x50 @467

COPY ~DarkHorizons/items/SCRSEC6.itm~ ~override~
  SAY NAME1 @461
  SAY NAME2 @461
  SAY 0x50 @468

COPY ~DarkHorizons/items/SCRSEC7.itm~ ~override~
  SAY NAME1 @461
  SAY NAME2 @461
  SAY 0x50 @469

/* ********************* Food *********************** */

COPY ~DarkHorizons/items/CMFOOD1.ITM~ ~override~
  SAY NAME1 @470
  SAY NAME2 @470
  SAY 0x50 @471
  SAY 0x54 @471
  SAY 0x10E @473

COPY ~DarkHorizons/items/CMFOOD2.itm~ ~override~
  SAY NAME1 @474
  SAY NAME2 @474
  SAY 0x50 @475
  SAY 0x54 @475
  SAY 0x10E @473

COPY ~DarkHorizons/items/CMGRAPE.itm~ ~override~
  SAY NAME1 @474
  SAY NAME2 @474
  SAY 0x50 @475
  SAY 0x54 @475
  SAY 0x10E @473

COPY ~DarkHorizons/items/CMHEAL1.ITM~ ~override~
  SAY NAME1 @763
  SAY NAME2 @476
  SAY 0x54 @477
  SAY 0x13E @478

COPY ~DarkHorizons/items/CMHEAL2.itm~ ~override~
  SAY NAME1 @479
  SAY NAME2 @480
  SAY 0x50 @481
  SAY 0x54 @482
  SAY 0x13E @478

COPY ~DarkHorizons/items/CMKFC01.ITM~ ~override~
  SAY NAME1 @483
  SAY NAME2 @483
  SAY 0x50 @484
  SAY 0x54 @484
  SAY 0x10E @473

COPY ~DarkHorizons/items/CMPOT01.itm~ ~override~
  SAY NAME1 @479
  SAY NAME2 @485
  SAY 0x50 @481
  SAY 0x54 @486

COPY ~DarkHorizons/items/CMPOT02.itm~ ~override~
  SAY NAME1 @479
  SAY NAME2 @487
  SAY 0x50 @481
  SAY 0x54 @488

/* ********************* Wands and other magical devices */

COPY ~DarkHorizons/items/CMWAQ01.itm~ ~override~
  SAY NAME1 @489
  SAY NAME2 @490
  SAY 0x50 @491
  SAY 0x54 @492

COPY ~DarkHorizons/items/CMWAQ02.itm~ ~override~
  SAY NAME1 @489
  SAY NAME2 @493
  SAY 0x50 @491
  SAY 0x54 @494

COPY ~DarkHorizons/items/CMWAQ03.itm~ ~override~
  SAY NAME1 @489
  SAY NAME2 @495
  SAY 0x50 @491
  SAY 0x54 @496

COPY ~DarkHorizons/items/SKLDEAD.ITM~ ~override~
  SAY NAME1 @497
  SAY NAME2 @498
  SAY 0x50 @499
  SAY 0x54 @500

COPY ~DarkHorizons/%ItemsFolder%/CMLUTE.itm~ ~override~
  SAY NAME1 @501
  SAY NAME2 @502
  SAY 0x50 @503
  SAY 0x54 @504

COPY ~DarkHorizons/items/CMCAND1.ITM~ ~override~
  SAY NAME1 @505
  SAY NAME2 @506
  SAY 0x50 @507
  SAY 0x54 @508
  SAY 0x10E @509

/* ********************* Plot items and creature only items *************** */

COPY ~DarkHorizons/items/CMDAMUL.ITM~ ~override~
  SAY NAME1 @410
  SAY NAME2 @510
  SAY 0x50 @511
  SAY 0x54 @512

COPY ~DarkHorizons/items/CMDRAG1.ITM~ ~override~
  SAY NAME1 @513
  SAY NAME2 @514
  SAY 0x50 @515
  SAY 0x54 @515

COPY ~DarkHorizons/items/CMDRAG2.ITM~ ~override~
  SAY NAME1 @513
  SAY NAME2 @514
  SAY 0x50 @515
  SAY 0x54 @515

COPY ~DarkHorizons/items/CMGHST2.ITM~ ~override~
  SAY NAME1 @514
  SAY NAME2 @514
  SAY 0x50 @515
  SAY 0x54 @515

COPY ~DarkHorizons/items/CMISC01.ITM~ ~override~
  SAY NAME1 @516
  SAY NAME2 @516
  SAY 0x50 @517

COPY ~DarkHorizons/items/CMKEY01.itm~ ~override~
  SAY NAME1 @518
  SAY NAME2 @519
  SAY 0x50 @520
  SAY 0x54 @521

COPY ~DarkHorizons/items/CMKEY02.itm~ ~override~
  SAY NAME1 @518
  SAY NAME2 @522
  SAY 0x50 @520
  SAY 0x54 @523

COPY ~DarkHorizons/items/CMKEY03.itm~ ~override~
  SAY NAME1 @524
  SAY NAME2 @525
  SAY 0x50 @526

COPY ~DarkHorizons/items/CMKEY04.itm~ ~override~
  SAY NAME1 @524
  SAY NAME2 @527
  SAY 0x50 @528

/* Bags & Containers New for version 200 */

COPY ~DarkHorizons/items/CMBAG01.ITM~ ~override~
  SAY NAME1 @810
  SAY NAME2 @810
  SAY 0x50 @809
  SAY 0x54 @809

COPY ~DarkHorizons/items/CMBAG03.ITM~ ~override~
  SAY NAME1 @812
  SAY NAME2 @812
  SAY 0x50 @811
  SAY 0x54 @811

COPY ~DarkHorizons/items/CMBAG04.ITM~ ~override~
  SAY NAME1 @814
  SAY NAME2 @814
  SAY 0x50 @813
  SAY 0x54 @813

COPY ~DarkHorizons/items/CMBAG05.ITM~ ~override~
  SAY NAME1 @816
  SAY NAME2 @816
  SAY 0x50 @815
  SAY 0x54 @815

COPY ~DarkHorizons/items/CMBAG06.ITM~ ~override~
  SAY NAME1 @818
  SAY NAME2 @818
  SAY 0x50 @817
  SAY 0x54 @817

/* BG1 Adventures items */

COPY ~DarkHorizons/items/maarow01.itm~   ~override/maarow01.itm~
  SAY NAME1 @183
  SAY NAME2 @529
  SAY UNIDENTIFIED_DESC @530
  SAY DESC @531

COPY ~DarkHorizons/items/maax1h01.itm~   ~override/maax1h01.itm~
  SAY NAME1 @764
  SAY NAME2 @532
  SAY DESC @533

COPY ~DarkHorizons/%ItemsFolder%/mclck01.itm~   ~override/mclck01.itm~
  SAY NAME1 @112
  SAY NAME2 @534
  SAY UNIDENTIFIED_DESC @114
  SAY DESC @535

COPY    ~DarkHorizons/items/ma1sw01.itm~   ~override/ma1sw01.itm~
  SAY NAME1 @765
  SAY NAME2 @536
  SAY DESC @537

COPY    ~DarkHorizons/items/ma1sw02.itm~   ~override/ma1sw02.itm~
  SAY NAME1 @538
  SAY NAME2 @539
  SAY DESC @540

COPY    ~DarkHorizons/items/ma2sw01.itm~   ~override/ma2sw01.itm~
  SAY NAME1 @394
  SAY NAME2 @541
  SAY UNIDENTIFIED_DESC @542
  SAY DESC @543

COPY    ~DarkHorizons/items/ma2sw02.itm~   ~override/ma2sw02.itm~
  SAY NAME1 @544
  SAY NAME2 @545
  SAY DESC @546

COPY    ~DarkHorizons/items/maax1h02.itm~   ~override/maax1h02.itm~
  SAY NAME1 @764
  SAY NAME2 @532
  SAY DESC @547

COPY    ~DarkHorizons/items/maax1h03.itm~   ~override/maax1h03.itm~
  SAY NAME1 @200
  SAY NAME2 @548
  SAY UNIDENTIFIED_DESC @205
  SAY DESC @549

COPY ~DarkHorizons/%ItemsFolder%/mabrac01.itm~   ~override/mabrac01.itm~
  SAY NAME1 @766
  SAY NAME2 @550
  SAY DESC @551

COPY ~DarkHorizons/%ItemsFolder%/mabrac02.itm~   ~override/mabrac02.itm~
  SAY NAME1 @766
  SAY NAME2 @552
  SAY DESC @553

COPY    ~DarkHorizons/items/mabull01.itm~   ~override/mabull01.itm~
  SAY NAME1 @275
  SAY NAME2 @554
  SAY UNIDENTIFIED_DESC @280
  SAY DESC @555

COPY    ~DarkHorizons/items/machan01.itm~   ~override/machan01.itm~
  SAY NAME1 @767
  SAY NAME2 @556
  SAY DESC @557

COPY    ~DarkHorizons/%ItemsFolder%/maclck01.itm~   ~override/maclck01.itm~
  SAY NAME1 @116
  SAY NAME2 @558
  SAY DESC @559

COPY    ~DarkHorizons/items/macmbl01.itm~   ~override/macmbl01.itm~
  SAY NAME1 @221
  SAY NAME2 @560
  SAY DESC @561

COPY    ~DarkHorizons/items/macmbl02.itm~   ~override/macmbl02.itm~
  SAY NAME1 @207
  SAY NAME2 @562
  SAY DESC @563

COPY    ~DarkHorizons/items/macmda01.itm~   ~override/macmda01.itm~
  SAY NAME1 @286
  SAY NAME2 @564
  SAY DESC @565

COPY    ~DarkHorizons/items/macmhe01.itm~   ~override/macmhe01.itm~
  SAY NAME1 @566
  SAY NAME2 @567
  SAY UNIDENTIFIED_DESC @148
  SAY DESC @568

COPY    ~DarkHorizons/items/macmle01.itm~   ~override/macmle01.itm~
  SAY NAME1 @70
  SAY NAME2 @39
  SAY UNIDENTIFIED_DESC @569
  SAY DESC @570

COPY    ~DarkHorizons/items/macmle02.itm~   ~override/macmle02.itm~
  SAY NAME1 @70
  SAY NAME2 @571
  SAY UNIDENTIFIED_DESC @569
  SAY DESC @572

COPY    ~DarkHorizons/items/macmxb01.itm~   ~override/macmxb01.itm~
  SAY NAME1 @573
  SAY NAME2 @574
  SAY UNIDENTIFIED_DESC @575
  SAY DESC @576

COPY    ~DarkHorizons/items/mahamm01.itm~   ~override/mahamm01.itm~
  SAY NAME1 @768
  SAY NAME2 @577
  SAY DESC @578

COPY    ~DarkHorizons/%ItemsFolder%/maplat02.itm~   ~override/maplat02.itm~
  SAY NAME1 @769
  SAY NAME2 @579
  SAY DESC @580

COPY    ~DarkHorizons/%ItemsFolder%/mashld01.itm~   ~override/mashld01.itm~
  SAY NAME1 @770
  SAY NAME2 @581
  SAY DESC @582

COPY    ~DarkHorizons/items/mbul01.itm~   ~override/mbul01.itm~
  SAY NAME1 @275
  SAY NAME2 @583
  SAY UNIDENTIFIED_DESC @280
  SAY DESC @584

COPY    ~DarkHorizons/%ItemsFolder%/mcmbow01.itm~   ~override/mcmbow01.itm~
  SAY NAME1 @771
  SAY NAME2 @585
  SAY DESC @586

COPY    ~DarkHorizons/items/mhalb01.itm~   ~override/mhalb01.itm~
  SAY NAME1 @772
  SAY NAME2 @587
  SAY DESC @588

COPY    ~DarkHorizons/%ItemsFolder%/mplat01.itm~   ~override/mplat01.itm~
  SAY NAME1 @769
  SAY NAME2 @589
  SAY DESC @590

 /* ******************** CoM Forge Items *********************** */

 COPY ~DarkHorizons/items/MACMHE01.itm~  ~override/MACMHE01.itm~
  SAY NAME1 @773
  SAY NAME2 @567
  SAY DESC @568

COPY ~DarkHorizons/items/MASWOR02.ITM~  ~override/MASWOR02.ITM~
  SAY NAME1 @774
  SAY NAME2 @591
  SAY DESC @592

COPY ~DarkHorizons/%ItemsFolder%/maaxe001.itm~  ~override/maaxe001.itm~
  SAY NAME1 @200
  SAY NAME2 @593
  SAY UNIDENTIFIED_DESC @594
  SAY DESC @595

COPY ~DarkHorizons/items/mablun06.itm~  ~override/mablun06.itm~
  SAY NAME1 @775
  SAY NAME2 @596
  SAY DESC @597

COPY ~DarkHorizons/items/MAFORG01.ITM~  ~override/MAFORG01.ITM~
  SAY NAME1 @776
  SAY NAME2 @598
  SAY DESC @599

COPY ~DarkHorizons/items/MAFORG02.ITM~  ~override/MAFORG02.ITM~
  SAY NAME1 @774
  SAY NAME2 @600
  SAY DESC @601

COPY ~DarkHorizons/items/MAFORG03.ITM~  ~override/MAFORG03.ITM~
  SAY NAME1 @777
  SAY NAME2 @602
  SAY DESC @603

COPY ~DarkHorizons/items/MAFORG04.ITM~  ~override/MAFORG04.ITM~
  SAY NAME1 @778
  SAY NAME2 @604
  SAY DESC @605

COPY ~DarkHorizons/items/MAFORG05.ITM~  ~override/MAFORG05.ITM~
  SAY NAME1 @779
  SAY NAME2 @606
  SAY DESC @607

COPY ~DarkHorizons/%ItemsFolder%/MAFORG06.ITM~  ~override/MAFORG06.ITM~
  SAY NAME1 @780
  SAY NAME2 @608
  SAY DESC @609

COPY ~DarkHorizons/%ItemsFolder%/MAFORG07.ITM~  ~override/MAFORG07.ITM~
  SAY NAME1 @781
  SAY NAME2 @610
  SAY DESC @611

COPY ~DarkHorizons/items/MAFORG08.ITM~  ~override/MAFORG08.ITM~
  SAY NAME1 @782
  SAY NAME2 @612
  SAY DESC @613

COPY ~DarkHorizons/items/MAFORG09.ITM~  ~override/MAFORG09.ITM~
  SAY NAME1 @783
  SAY NAME2 @614
  SAY DESC @615

COPY ~DarkHorizons/items/MAFORG10.ITM~  ~override/MAFORG10.ITM~
  SAY NAME1 @784
  SAY NAME2 @616
  SAY DESC @617

COPY ~DarkHorizons/items/MAFORG11.ITM~  ~override/MAFORG11.ITM~
  SAY NAME1 @785
  SAY NAME2 @618
  SAY DESC @619

COPY ~DarkHorizons/%ItemsFolder%/mapla001.itm~  ~override/mapla001.itm~
  SAY NAME1 @769
  SAY NAME2 @620
  SAY DESC @621

COPY ~DarkHorizons/items/MASPER01.ITM~  ~override/MASPER01.ITM~
  SAY NAME1 @786
  SAY NAME2 @622
  SAY DESC @623

COPY ~DarkHorizons/items/MASWOR01.ITM~  ~override/MASWOR01.ITM~
  SAY NAME1 @346
  SAY NAME2 @624
  SAY UNIDENTIFIED_DESC @625
  SAY DESC @626

COPY ~DarkHorizons/items/MAHAMM01.ITM~  ~override/MAHAMM01.ITM~
  SAY NAME1 @787
  SAY NAME2 @627
  SAY DESC @628


COPY ~DarkHorizons/items/MAHAMM02.ITM~  ~override/MAHAMM02.ITM~
  SAY NAME1 @787
  SAY NAME2 @629
  SAY DESC @630

COPY ~DarkHorizons/%ItemsFolder%/MAHELM01.ITM~  ~override/MAHELM01.ITM~
  SAY NAME1 @780
  SAY NAME2 @631
  SAY DESC @632

COPY ~DarkHorizons/%ItemsFolder%/MAHELM02.ITM~  ~override/MAHELM02.ITM~
  SAY NAME1 @780
  SAY NAME2 @633
  SAY DESC @634

COPY ~DarkHorizons/%ItemsFolder%/MACLOC01.ITM~  ~override/MACLOC01.ITM~
  SAY NAME1 @788
  SAY NAME2 @635
  SAY DESC @636

COPY ~DarkHorizons/items/MABLUN01.ITM~  ~override/MABLUN01.ITM~
  SAY NAME1 @775
  SAY NAME2 @637
  SAY DESC @638

COPY ~DarkHorizons/items/MABLUN02.ITM~  ~override/MABLUN02.ITM~
  SAY NAME1 @789
  SAY NAME2 @208
  SAY DESC @639

COPY ~DarkHorizons/items/MABLUN03.ITM~  ~override/MABLUN03.ITM~
  SAY NAME1 @790
  SAY NAME2 @640
  SAY DESC @641

COPY ~DarkHorizons/items/MABLUN04.ITM~  ~override/MABLUN04.ITM~
  SAY NAME1 @775
  SAY NAME2 @642
  SAY DESC @643

COPY ~DarkHorizons/%ItemsFolder%/MABLUN05.ITM~  ~override/MABLUN05.ITM~
  SAY NAME1 @789
  SAY NAME2 @644
  SAY DESC @645

 /* ******************** Dialogs ************************* */

/* COMPILE ~DarkHorizons/dlgs/bilbo.d~  */

/* COMPILE ~DarkHorizons/dlgs/bungo.d~  */

COMPILE ~DarkHorizons/dlgs/cmandrea.d~

COMPILE ~DarkHorizons/dlgs/cmboun1.d~

COMPILE ~DarkHorizons/dlgs/cmboun7.d~

COMPILE ~DarkHorizons/dlgs/cmdryad.d~

COMPILE ~DarkHorizons/dlgs/cmgeorg1.d~

COMPILE ~DarkHorizons/dlgs/cmfood1.d~

COMPILE ~DarkHorizons/dlgs/cmgeorge.d~

/* COMPILE ~DarkHorizons/dlgs/cmgrice.d~  */

COMPILE ~DarkHorizons/dlgs/cmgsmeag.d~

COMPILE ~DarkHorizons/dlgs/cmjones.d~

/* COMPILE ~DarkHorizons/dlgs/cmmadel.d~ */

COMPILE ~DarkHorizons/dlgs/cmmaria.d~

/* COMPILE ~DarkHorizons/dlgs/cmmike.d~ */

COMPILE ~DarkHorizons/dlgs/cmmiran.d~

COMPILE ~DarkHorizons/dlgs/cmmystr.d~

COMPILE ~DarkHorizons/dlgs/cmnajara.d~

/* COMPILE ~DarkHorizons/dlgs/cmnikita.d~ */

COMPILE ~DarkHorizons/dlgs/cmosec12.d~

/* COMPILE ~DarkHorizons/dlgs/cmpaul.d~ */

ACTION_IF GAME_IS ~tutu_totsc~ THEN BEGIN
  COMPILE ~DarkHorizons/Tutu/dlgs/cmquest1.d~
END ELSE BEGIN
  COMPILE ~DarkHorizons/dlgs/cmquest1.d~
END

COMPILE ~DarkHorizons/dlgs/cmquincy.d~

COMPILE ~DarkHorizons/dlgs/cmsec06.d~

COMPILE ~DarkHorizons/dlgs/cmsec22.d~

ACTION_IF GAME_IS ~tutu_totsc~ THEN BEGIN
  COMPILE ~DarkHorizons/Tutu/dlgs/cmselen.d~
END ELSE BEGIN
  COMPILE ~DarkHorizons/dlgs/cmselen.d~
END

/* COMPILE ~DarkHorizons/dlgs/cmshinay.d~   */

/* COMPILE ~DarkHorizons/dlgs/cmthor.d~ */

COMPILE ~DarkHorizons/dlgs/cmtrist.d~

COMPILE ~DarkHorizons/dlgs/cmwendel.d~

ACTION_IF GAME_IS ~tutu_totsc~ THEN BEGIN
  COMPILE ~DarkHorizons/Tutu/dlgs/cmwinton.d~
END ELSE BEGIN
  COMPILE ~DarkHorizons/dlgs/cmwinton.d~
END

COMPILE ~DarkHorizons/dlgs/cmzarg.d~

/* COMPILE ~DarkHorizons/dlgs/frodo.d~  */

COMPILE ~DarkHorizons/dlgs/kieran.d~

COMPILE ~DarkHorizons/dlgs/oversight.d~

// COMPILE ~DarkHorizons/dlgs/cmrsec02.d~

COMPILE ~DarkHorizons/dlgs/CMGHST01.d~

ACTION_IF GAME_IS ~tutu_totsc~ THEN BEGIN
  COMPILE ~DarkHorizons/Tutu/dlgs/magnus.d~
END ELSE BEGIN
  COMPILE ~DarkHorizons/dlgs/magnus.d~
END

ACTION_IF GAME_IS ~tutu_totsc~ THEN BEGIN
  COMPILE ~DarkHorizons/Tutu/dlgs/mathoren.d~
END ELSE BEGIN
  COMPILE ~DarkHorizons/dlgs/mathoren.d~
END

COMPILE ~DarkHorizons/dlgs/masal01.d~

COMPILE ~DarkHorizons/dlgs/magorken.d~

COMPILE ~DarkHorizons/dlgs/brotus.d~

/* --------------- Version 2.00 Additions -----------  */

COMPILE ~DarkHorizons/dlgs/CMMERC03.d~

COMPILE ~DarkHorizons/dlgs/CMMERC04.d~

COMPILE ~DarkHorizons/dlgs/CMMERC05.d~

COMPILE ~DarkHorizons/dlgs/CMMERC06.d~

COMPILE ~DarkHorizons/dlgs/redwiz.d~

COMPILE ~DarkHorizons/dlgs/elves.d~

COMPILE ~DarkHorizons/dlgs/cmcarav.d~

COMPILE ~DarkHorizons/dlgs/cmlath.d~

/* --------------- BGEE Additions -----------  */

ACTION_IF GAME_IS ~bgee eet~ THEN BEGIN
  COMPILE ~DarkHorizons/dlgs/cmsect1.d~
END


/* ************************** Check if Area Script is assigned ******************** */

/*	COPY_EXISTING ~AR3302.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR3302~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR3302~ (8)
  			END
  		END
	COPY_EXISTING ~AR0700.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR0700~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR0700~ (8)
  			END
  		END
	COPY_EXISTING ~AR1207.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR1207~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR1207~ (8)
  			END
  		END
	COPY_EXISTING ~AR1600.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR1600~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR1600~ (8)
  			END
  		END
  COPY_EXISTING ~AR2606.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR2606~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR2606~ (8)
  			END
  		END
  COPY_EXISTING ~AR5403.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR5403~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR5403~ (8)
  			END
  	END
  COPY_EXISTING ~AR3800.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR3800~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR3800~ (8)
  			END
  		END
  COPY_EXISTING ~AR4000.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR4000~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR4000~ (8)
  			END
  		END
  COPY_EXISTING ~AR5200.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR5200~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR5200~ (8)
  			END
  		END
  COPY_EXISTING ~AR2301.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR2301~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR2301~ (8)
  			END
  		END
  COPY_EXISTING ~AR0705.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR0705~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR0705~ (8)
  			END
  		END
  COPY_EXISTING ~AR1900.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR1900~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR1900~ (8)
  			END
  		END
  COPY_EXISTING ~AR1000.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR1000~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR1000~ (8)
  			END
  		END
  COPY_EXISTING ~AR1700.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR1700~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR1700~ (8)
  			END
  		END
  COPY_EXISTING ~AR1800.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR1800~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR1800~ (8)
  			END
  		END
  COPY_EXISTING ~AR1803.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR1803~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR1803~ (8)
  			END
  		END
  COPY_EXISTING ~AR2100.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR2100~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR2100~ (8)
  			END
  		END
  COPY_EXISTING ~AR2300.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR2300~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR2300~ (8)
  			END
  		END
  COPY_EXISTING ~AR2800.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR2800~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR2800~ (8)
  			END
  		END
  COPY_EXISTING ~AR3300.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR3300~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR3300~ (8)
  			END
  		END
  COPY_EXISTING ~AR5100.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR5100~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR5100~ (8)
  			END
  		END
  COPY_EXISTING ~AR5400.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR5400~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR5400~ (8)
  			END
  		END
  COPY_EXISTING ~AR2304.are~ ~override~
  	READ_ASCII 0x94 area_script
  		PATCH_IF (("%area_script%" STRING_COMPARE_CASE "None")=0) BEGIN
  			PATCH_IF GAME_IS ~Tutu_totsc~ BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~_AR2304~ (8)
  			END ELSE BEGIN
  				WRITE_EVALUATED_ASCII 0x94 ~AR2304~ (8)
  			END
  		END */

/* ************************** Scripts ******************** */

/* Compile area scripts */

/*
COMPILE ~DarkHorizons/baf/AR1600.baf~
COMPILE ~DarkHorizons/baf/AR2606.baf~
COMPILE ~DarkHorizons/baf/AR3302.baf~
COMPILE ~DarkHorizons/baf/AR3800.baf~
COMPILE ~DarkHorizons/baf/AR4000.baf~
COMPILE ~DarkHorizons/baf/AR5200.baf~
*/
COPY_EXISTING ~%AR15%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR1600.baf~

COPY_EXISTING ~%AR16%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR2606.baf~

COPY_EXISTING ~%AR1%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR3302.baf~

COPY_EXISTING ~%AR18%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR3800.baf~

COPY_EXISTING ~%AR19%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR4000.baf~

COPY_EXISTING ~%AR20%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR5200.baf~

COPY_EXISTING ~%AR34%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR2304.baf~

COMPILE ~DarkHorizons/baf/cm0750.baf~
COMPILE ~DarkHorizons/baf/cm0751.baf~
COMPILE ~DarkHorizons/baf/cm0752.baf~
COMPILE ~DarkHorizons/baf/cm0753.baf~
COMPILE ~DarkHorizons/baf/cm3373.baf~

/*  Commented out until changes are validated or not (creature CMGHST07.cre/CM2680.ar)

- Add an existing mod creature not implemented [(A ghost mage in CM2680)](https://forums.beamdog.com/discussion/comment/1209318/#Comment_1209318))

//COMPILE ~DarkHorizons/baf/CM2680.baf~

*/

/* Append area scripts */

COPY_EXISTING ~%AR2%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar0700.baf~

COPY_EXISTING ~%AR22%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar0705.baf~

COPY_EXISTING ~%AR10%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar0514.baf~

COPY_EXISTING ~%AR24%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar1000.baf~

COPY_EXISTING ~%AR25%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar1700.baf~

COPY_EXISTING ~%AR26%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar1800.baf~

COPY_EXISTING ~%AR27%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar1803.baf~

COPY_EXISTING ~%AR28%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar2100.baf~

COPY_EXISTING ~%AR29%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar2300.baf~

COPY_EXISTING ~%area_script%.bcs~ ~override~
DECOMPILE_BCS_TO_BAF
REPLACE_TEXTUALLY ~GlobalGT("Chapter","GLOBAL",9999993)~ ~GlobalGT("Chapter","GLOBAL",%chapter3%)~
COMPILE_BAF_TO_BCS

COPY_EXISTING ~%AR30%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar2800.baf~

COPY_EXISTING ~%area_script%.bcs~ ~override~
DECOMPILE_BCS_TO_BAF
REPLACE_TEXTUALLY ~Global("Chapter","GLOBAL",9999992)~ ~Global("Chapter","GLOBAL",%chapter2%)~
REPLACE_TEXTUALLY ~GlobalGT("Chapter","GLOBAL",9999994)~ ~GlobalGT("Chapter","GLOBAL",%chapter4%)~
COMPILE_BAF_TO_BCS

COPY_EXISTING ~%AR31%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar3300.baf~
    EVALUATE_BUFFER

COPY_EXISTING ~%AR32%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~	~DarkHorizons/baf/ar5100.baf~

COPY_EXISTING ~%AR33%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_TOP ~%area_script%.bcs~	~DarkHorizons/baf/ar5400.baf~

COPY_EXISTING ~%AR23%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/ar1900.baf~

COPY_EXISTING ~%AR21%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_TOP ~%area_script%.bcs~ ~DarkHorizons/baf/ar2301.baf~

/* ------------------ Version 2.00 Additions ----------  */

COPY_EXISTING ~%AR35%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_TOP ~%area_script%.bcs~ ~DarkHorizons/baf/ar0900.baf~

COPY_EXISTING ~%AR36%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR3900.baf~

COPY_EXISTING ~%AR37%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR3304.baf~

COPY_EXISTING ~%AR38%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR3351.baf~

/* -----------------------------------------------------------  */

/*
COMPILE ~DarkHorizons/baf/AR5403.baf~
COMPILE ~DarkHorizons/baf/AR1207.baf~
*/


COPY_EXISTING ~%AR17%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR5403.baf~

COPY_EXISTING ~%AR11%.are~ ~override~
  READ_ASCII 0x94 area_script
BUT_ONLY
EXTEND_BOTTOM ~%area_script%.bcs~ ~DarkHorizons/baf/AR1207.baf~

/* Compile creature scripts */

COMPILE ~DarkHorizons/baf/cmbear02.baf~
/* COMPILE ~DarkHorizons/baf/cmcleric1.baf~  */
COMPILE ~DarkHorizons/baf/cmdrag.baf~
COMPILE ~DarkHorizons/baf/cmdru01.baf~
COMPILE ~DarkHorizons/baf/cmdru02.baf~
COMPILE ~DarkHorizons/baf/cmdruid1.baf~
COMPILE ~DarkHorizons/baf/cmdruid2.baf~
COMPILE ~DarkHorizons/baf/cmdruid3.baf~
COMPILE ~DarkHorizons/baf/cmdurg.baf~
COMPILE ~DarkHorizons/baf/cmgeorg1.baf~
COMPILE ~DarkHorizons/baf/cmgeorge.baf~
COMPILE ~DarkHorizons/baf/cmgeorw1.baf~
COMPILE ~DarkHorizons/baf/cmghst01.baf~
COMPILE ~DarkHorizons/baf/cmghst05.baf~
COMPILE ~DarkHorizons/baf/cmghst06.baf~
COMPILE ~DarkHorizons/baf/cmghst07.baf~
COMPILE ~DarkHorizons/baf/cmghst08.baf~
COMPILE ~DarkHorizons/baf/cmkier1.baf~
COMPILE ~DarkHorizons/baf/cmkier2.baf~
COMPILE ~DarkHorizons/baf/cmmadel.baf~
COMPILE ~DarkHorizons/baf/cmmaria2.baf~
COMPILE ~DarkHorizons/baf/cmmariah.baf~
COMPILE ~DarkHorizons/baf/cmnajar.baf~
COMPILE ~DarkHorizons/baf/cmosec04.baf~
COMPILE ~DarkHorizons/baf/cmosec13.baf~
COMPILE ~DarkHorizons/baf/cmosec14.baf~
COMPILE ~DarkHorizons/baf/cmoversi.baf~
COMPILE ~DarkHorizons/baf/cmovers2.baf~

/* --------------- Version 2.00 Additions -----------  */

COMPILE ~DarkHorizons/baf/cmredw01.baf~
COMPILE ~DarkHorizons/baf/cmredw02.baf~
COMPILE ~DarkHorizons/baf/cmredw03.baf~
COMPILE ~DarkHorizons/baf/cmlath1.baf~
COMPILE ~DarkHorizons/baf/cmlath2.baf~

/* ---------------- End ---------------------------- */

COMPILE ~DarkHorizons/baf/cmsec06.baf~
COMPILE ~DarkHorizons/baf/cmsecred.baf~
COMPILE ~DarkHorizons/baf/cmtrisd.baf~
COMPILE ~DarkHorizons/baf/dragdie.baf~
COMPILE ~DarkHorizons/baf/cmmystr.baf~

/* --------------- Version 2.xx Additions/Fixes -----------  */

COMPILE ~DarkHorizons/baf/cmlatha.baf~
COMPILE ~DarkHorizons/baf/cmlathat.baf~
COMPILE ~DarkHorizons/baf/cmsec25.baf~

/*  Creatures  */

/*  Forge Creatures  */

COPY ~DarkHorizons/cre/MAENC04.cre~ ~override/MAENC04.cre~
  SAY NAME1 @646
  SAY NAME2 @646

COPY ~DarkHorizons/cre/MADURC01.cre~ ~override/MADURC01.cre~
  SAY NAME1 @647
  SAY NAME2 @647

COPY ~DarkHorizons/cre/MADURC02.cre~ ~override/MADURC02.cre~
  SAY NAME1 @647
  SAY NAME2 @647

COPY ~DarkHorizons/cre/MADURF01.cre~ ~override/MADURF01.cre~
  SAY NAME1 @648
  SAY NAME2 @648

COPY ~DarkHorizons/cre/MADURF02.cre~ ~override/MADURF02.cre~
  SAY NAME1 @649
  SAY NAME2 @649

COPY ~DarkHorizons/cre/MADURT01.cre~ ~override/MADURT01.cre~
  SAY NAME1 @650
  SAY NAME2 @650

COPY ~DarkHorizons/cre/MAENC01.cre~ ~override/MAENC01.cre~

COPY ~DarkHorizons/cre/MAENC02.cre~ ~override/MAENC02.cre~

COPY ~DarkHorizons/cre/MAENC03.cre~ ~override/MAENC03.cre~

COPY ~DarkHorizons/cre/MASAL02.cre~ ~override/MASAL02.cre~
  SAY NAME1 @651
  SAY NAME2 @651

COPY ~DarkHorizons/cre/MASAL01.cre~ ~override/MASAL01.cre~
  SAY NAME1 @652
  SAY NAME2 @652

COPY ~DarkHorizons/cre/MATHOREN.cre~ ~override/MATHOREN.cre~
  SAY NAME1 @653
  SAY NAME2 @653

COPY ~DarkHorizons/cre/CM01A514.CRE~ ~override/CM01A514.CRE~
  SAY NAME1 @654
  SAY NAME2 @654

COPY ~DarkHorizons/cre/CM02A514.CRE~ ~override/CM02A514.CRE~
  SAY NAME1 @655
  SAY NAME2 @655

COPY ~DarkHorizons/cre/CM03A514.CRE~ ~override/CM03A514.CRE~
  SAY NAME1 @656
  SAY NAME2 @656

COPY ~DarkHorizons/cre/CM04A514.CRE~ ~override/CM04A514.CRE~
  SAY NAME1 @657
  SAY NAME2 @657

COPY ~DarkHorizons/cre/CM05A514.CRE~ ~override/CM05A514.CRE~
  SAY NAME1 @658
  SAY NAME2 @658
  REPLACE_CRE_ITEM ~BRAC07~ #0 #0 #0 ~unstealable&undroppable~ ~gloves~

COPY ~DarkHorizons/cre/CM0700A.CRE~ ~override/CM0700A.CRE~
  SAY NAME1 @659
  SAY NAME2 @659

COPY ~DarkHorizons/cre/CM1800A1.CRE~ ~override~
  SAY NAME1 @660
  SAY NAME2 @660

COPY ~DarkHorizons/cre/CM1803A1.CRE~ ~override~
  SAY NAME1 @660
  SAY NAME2 @660
  REPLACE_CRE_ITEM ~SW1H06~ #0 #0 #0 ~unstealable&undroppable~ ~weapon2~

COPY ~DarkHorizons/cre/CM1803A2.CRE~ ~override~
  SAY NAME1 @660
  SAY NAME2 @660

COPY ~DarkHorizons/cre/CM1803A3.CRE~ ~override~
  SAY NAME1 @661
  SAY NAME2 @661

COPY ~DarkHorizons/cre/CM1803A4.CRE~ ~override~
  SAY NAME1 @662
  SAY NAME2 @662

COPY ~DarkHorizons/cre/CM1A2100.CRE~ ~override~
  SAY NAME1 @663
  SAY NAME2 @663

COPY ~DarkHorizons/cre/CM2A2100.CRE~ ~override~
  SAY NAME1 @663
  SAY NAME2 @663

COPY ~DarkHorizons/cre/CM3A2100.CRE~ ~override~
  SAY NAME1 @664
  SAY NAME2 @664

COPY ~DarkHorizons/cre/CMAPOC1.CRE~ ~override~
  SAY NAME1 @665
  SAY NAME2 @665

COPY ~DarkHorizons/cre/CMAPOC2.CRE~ ~override~
  SAY NAME1 @665
  SAY NAME2 @665

COPY ~DarkHorizons/cre/CMASHIRU.CRE~ ~override~
  SAY NAME1 @666
  SAY NAME2 @667
  REPLACE_CRE_ITEM ~MAGE01~ #0 #0 #0 ~unstealable&undroppable~ ~rring~

COPY ~DarkHorizons/cre/CMBEAR01.CRE~ ~override~
  SAY NAME1 @668
  SAY NAME2 @668

COPY ~DarkHorizons/cre/CMBEAR02.CRE~ ~override~
  SAY NAME1 @669
  SAY NAME2 @669

COPY ~DarkHorizons/cre/CMBOU01.CRE~ ~override~
  SAY NAME1 @670
  SAY NAME2 @670

COPY ~DarkHorizons/cre/CMBOU02.CRE~ ~override~
  SAY NAME1 @671
  SAY NAME2 @671

COPY ~DarkHorizons/cre/CMBOU03.CRE~ ~override~
  SAY NAME1 @672
  SAY NAME2 @672

COPY ~DarkHorizons/cre/CMBOU04.CRE~ ~override~
  SAY NAME1 @673
  SAY NAME2 @673

COPY ~DarkHorizons/cre/CMBOU05.CRE~ ~override~
  SAY NAME1 @674
  SAY NAME2 @674

COPY ~DarkHorizons/cre/CMBOU06.CRE~ ~override~
  SAY NAME1 @675
  SAY NAME2 @675

COPY ~DarkHorizons/cre/CMBOU07.CRE~ ~override~
  SAY NAME1 @676
  SAY NAME2 @676

COPY ~DarkHorizons/cre/CMDRAG.CRE~ ~override~
  SAY NAME1 @677
  SAY NAME2 @677

COPY ~DarkHorizons/cre/CMDRU01.CRE~ ~override~
  SAY NAME1 @678
  SAY NAME2 @678

COPY ~DarkHorizons/cre/CMDRU02.CRE~ ~override~
  SAY NAME1 @679
  SAY NAME2 @679
  REPLACE_CRE_ITEM ~SW1H06~ #0 #0 #0 ~unstealable&undroppable~ ~weapon1~
  REPLACE_CRE_ITEM ~BOW07~ #0 #0 #0 ~unstealable&undroppable~ ~weapon2~

COPY ~DarkHorizons/cre/CMDRU03.CRE~ ~override~
  SAY NAME1 @680
  SAY NAME2 @680

COPY ~DarkHorizons/cre/CMDRU04.CRE~ ~override~
  SAY NAME1 @663
  SAY NAME2 @663

COPY ~DarkHorizons/cre/CMDRU05.CRE~ ~override~
  SAY NAME1 @663
  SAY NAME2 @663

COPY ~DarkHorizons/cre/CMDRU06.CRE~ ~override~
  SAY NAME1 @663
  SAY NAME2 @663

COPY ~DarkHorizons/cre/CMDRU07.CRE~ ~override~
  SAY NAME1 @663
  SAY NAME2 @663

COPY ~DarkHorizons/cre/CMDRY01.CRE~ ~override~
  SAY NAME1 @681
  SAY NAME2 @681

COPY ~DarkHorizons/cre/CMFOOD1.CRE~ ~override~
  SAY NAME1 @682
  SAY NAME2 @682

COPY ~DarkHorizons/cre/CMGGO1.CRE~ ~override~
  SAY NAME1 @683
  SAY NAME2 @683

COPY ~DarkHorizons/cre/CMGGOB1.CRE~ ~override~
  SAY NAME1 @683
  SAY NAME2 @683

COPY ~DarkHorizons/cre/CMGHAU01.CRE~ ~override~
  SAY NAME1 @684
  SAY NAME2 @684

COPY ~DarkHorizons/cre/CMGHST01.CRE~ ~override~
  SAY NAME1 @685
  SAY NAME2 @685

COPY ~DarkHorizons/cre/CMGHST02.CRE~ ~override~
  SAY NAME1 @686
  SAY NAME2 @686

COPY ~DarkHorizons/cre/CMGHST03.CRE~ ~override~
  SAY NAME1 @686
  SAY NAME2 @686

COPY ~DarkHorizons/cre/CMGHST04.CRE~ ~override~
  SAY NAME1 @686
  SAY NAME2 @686

COPY ~DarkHorizons/cre/CMGHST05.CRE~ ~override~
  SAY NAME1 @687
  SAY NAME2 @687

COPY ~DarkHorizons/cre/CMGHST06.CRE~ ~override~
  SAY NAME1 @688
  SAY NAME2 @688

COPY ~DarkHorizons/cre/CMGHST07.CRE~ ~override~
  SAY NAME1 @689
  SAY NAME2 @689

COPY ~DarkHorizons/cre/CMGHST08.CRE~ ~override~
  SAY NAME1 @690
  SAY NAME2 @690

COPY ~DarkHorizons/cre/CMGNOL01.CRE~ ~override~
  SAY NAME1 @691
  SAY NAME2 @691
  REPLACE_CRE_ITEM ~HALB03~ #0 #0 #0 ~unstealable&undroppable~ ~weapon1~

COPY ~DarkHorizons/cre/CMGNOL02.CRE~ ~override~
  SAY NAME1 @692
  SAY NAME2 @692

COPY ~DarkHorizons/cre/CMGSMEAG.CRE~ ~override~
  SAY NAME1 @693
  SAY NAME2 @693
  REPLACE_CRE_ITEM ~SW1H06~ #0 #0 #0 ~unstealable&undroppable~ ~weapon1~

COPY ~DarkHorizons/cre/CMHELM01.CRE~ ~override~
  SAY NAME1 @694
  SAY NAME2 @694

COPY ~DarkHorizons/cre/CMHOB01.CRE~ ~override~
  SAY NAME1 @695
  SAY NAME2 @695

COPY ~DarkHorizons/cre/CMHOB02.CRE~ ~override~
  SAY NAME1 @696
  SAY NAME2 @696

COPY ~DarkHorizons/cre/CMHOB03.CRE~ ~override~
  SAY NAME1 @697
  SAY NAME2 @697

COPY ~DarkHorizons/cre/CMIRONE.CRE~ ~override~
  SAY NAME1 @698
  SAY NAME2 @698
  REPLACE_CRE_ITEM ~SW1H06~ #0 #0 #0 ~unstealable&undroppable~ ~weapon2~

COPY ~DarkHorizons/cre/CMKOB01.CRE~ ~override~
  SAY NAME1 @699
  SAY NAME2 @699

COPY ~DarkHorizons/cre/CMKOB02.CRE~ ~override~
  SAY NAME1 @700
  SAY NAME2 @700

COPY ~DarkHorizons/cre/CMKOB03.CRE~ ~override~
  SAY NAME1 @701
  SAY NAME2 @701

COPY ~DarkHorizons/cre/CMMAGNU.cre~ ~override~
  SAY NAME1 @702
  SAY NAME2 @702

COPY ~DarkHorizons/cre/CMMERC02.CRE~ ~override~
  SAY NAME1 @703
  SAY NAME2 @703

COPY ~DarkHorizons/cre/CMMYSTR.CRE~ ~override~
  SAY NAME1 @704
  SAY NAME2 @704
  SAY INITIAL_MEETING @900
  WRITE_LONG BATTLE_CRY1 (BNOT 0x0)
  WRITE_LONG SELECT_COMMON1 (BNOT 0x0)

COPY ~DarkHorizons/cre/CMNAJAR2.CRE~ ~override~
  SAY NAME1 @705
  SAY NAME2 @705
  SAY BATTLE_CRY1 @706

COPY ~DarkHorizons/cre/CMNAJAR3.CRE~ ~override~
  SAY NAME1 @707
  SAY NAME2 @707

COPY ~DarkHorizons/cre/CMNAJAR4.CRE~ ~override~
  SAY NAME1 @705
  SAY NAME2 @705
  SAY BATTLE_CRY1 @706

COPY ~DarkHorizons/cre/CMNAJARA.CRE~ ~override~
  SAY NAME1 @708
  SAY NAME2 @708
  SAY INITIAL_MEETING @709
  SAY BATTLE_CRY1 @710
  SAY DAMAGE @711
  SAY DYING @712

COPY ~DarkHorizons/cre/CMOGREM1.CRE~ ~override~
  SAY NAME1 @713
  SAY NAME2 @713
  REPLACE_CRE_ITEM ~MAGE01~ #0 #0 #0 ~unstealable&undroppable~ ~lring~

COPY ~DarkHorizons/cre/CMOSEC01.CRE~ ~override~
  SAY NAME1 @714
  SAY NAME2 @714

COPY ~DarkHorizons/cre/CMOSEC02.CRE~ ~override~
  SAY NAME1 @714
  SAY NAME2 @714

COPY ~DarkHorizons/cre/CMOSEC03.CRE~ ~override~
  SAY NAME1 @715
  SAY NAME2 @715

COPY ~DarkHorizons/cre/CMOSEC04.CRE~ ~override~
  SAY NAME1 @716
  SAY NAME2 @716 
  WRITE_ASCII SCRIPT_OVERRIDE ~cmovers2~ (8)
  REPLACE_CRE_ITEM ~BRAC07~ #0 #0 #0 ~unstealable&undroppable~ ~gloves~

COPY ~DarkHorizons/cre/CMOSEC05.CRE~ ~override~
  SAY NAME1 @717
  SAY NAME2 @717

COPY ~DarkHorizons/cre/CMOSEC06.CRE~ ~override~
  SAY NAME1 @717
  SAY NAME2 @717

COPY ~DarkHorizons/cre/CMOSEC07.CRE~ ~override~
  SAY NAME1 @717
  SAY NAME2 @717

COPY ~DarkHorizons/cre/CMOSEC08.CRE~ ~override~
  SAY NAME1 @718
  SAY NAME2 @718

COPY ~DarkHorizons/cre/CMOSEC09.CRE~ ~override~
  SAY NAME1 @715
  SAY NAME2 @715

COPY ~DarkHorizons/cre/CMOSEC10.CRE~ ~override~
  SAY NAME1 @719
  SAY NAME2 @719

COPY ~DarkHorizons/cre/CMOSEC11.CRE~ ~override~
  SAY NAME1 @719
  SAY NAME2 @719

COPY ~DarkHorizons/cre/CMOSEC12.CRE~ ~override~
  SAY NAME1 @720
  SAY NAME2 @720

COPY ~DarkHorizons/cre/CMOSEC13.CRE~ ~override~
  SAY NAME1 @716
  SAY NAME2 @716

COPY ~DarkHorizons/cre/CMOSEC14.CRE~ ~override~
  SAY NAME1 @716
  SAY NAME2 @716

COPY ~DarkHorizons/cre/CMOSEC15.CRE~ ~override~
	SAY NAME1 @714
	SAY NAME2 @714

COPY ~DarkHorizons/cre/CMOSEC16.CRE~ ~override~
	SAY NAME1 @714
	SAY NAME2 @714

COPY ~DarkHorizons/cre/CMQUEST1.CRE~ ~override~
  SAY NAME1 @721
  SAY NAME2 @721

COPY ~DarkHorizons/cre/CMROCKY.CRE~ ~override~
  SAY NAME1 @722
  SAY NAME2 @722

/* COPY ~DarkHorizons/cre/CMRSEC02.CRE~ ~override~
  SAY NAME1 @723
  SAY NAME2 @723  */

/* COPY ~DarkHorizons/cre/CMRSEC04.CRE~ ~override~
  SAY NAME1 @724
  SAY NAME2 @724  */

COPY ~DarkHorizons/cre/CMSEC01.CRE~ ~override~
  SAY NAME1 @725
  SAY NAME2 @725
  SAY INITIAL_MEETING @726
  SAY BATTLE_CRY1 @727
  SAY DAMAGE @728
  SAY DYING @729
  WRITE_LONG ATTACK1 (BNOT 0x0)
  WRITE_LONG SELECT_COMMON1 (BNOT 0x0)
  WRITE_LONG RESPONSE_TO_INSULT2 (BNOT 0x0)
  WRITE_LONG 0x198 (BNOT 0x0) // 0x198 DIALOG_HOSTILE

COPY ~DarkHorizons/cre/CMSEC02.CRE~ ~override~
  SAY NAME1 @723
  SAY NAME2 @723

COPY ~DarkHorizons/cre/CMSEC03.CRE~ ~override~
  SAY NAME1 @730
  SAY NAME2 @730

COPY ~DarkHorizons/cre/CMSEC04.CRE~ ~override~
  SAY NAME1 @731
  SAY NAME2 @731

COPY ~DarkHorizons/cre/CMSEC05.CRE~ ~override~
  SAY NAME1 @732
  SAY NAME2 @732

COPY ~DarkHorizons/cre/CMSEC06.CRE~ ~override~
  SAY NAME1 @733
  SAY NAME2 @733

COPY ~DarkHorizons/cre/CMSEC07.CRE~ ~override~
  SAY NAME1 @734
  SAY NAME2 @734

COPY ~DarkHorizons/cre/CMSEC08.CRE~ ~override~
  SAY NAME1 @735
  SAY NAME2 @735

COPY ~DarkHorizons/cre/CMSEC08A.CRE~ ~override~
  SAY NAME1 @735
  SAY NAME2 @735

COPY ~DarkHorizons/cre/CMSEC09.CRE~ ~override~
  SAY NAME1 @736
  SAY NAME2 @736

COPY ~DarkHorizons/cre/CMSEC10.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737
  REPLACE_CRE_ITEM ~HAMM02~ #0 #0 #0 ~unstealable&undroppable~ ~WEAPON1~

COPY ~DarkHorizons/cre/CMSEC10A.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC10B.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC10C.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC11.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737
  REPLACE_CRE_ITEM ~POTN10~ #0 #0 #0 ~unstealable&undroppable~ ~qitem2~

COPY ~DarkHorizons/cre/CMSEC12.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC12A.CRE~ ~override~
  SAY NAME1 @738
  SAY NAME2 @738

COPY ~DarkHorizons/cre/CMSEC12B.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC12C.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC12D.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC13.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC14.CRE~ ~override~
  SAY NAME1 @738
  SAY NAME2 @738
  REPLACE_CRE_ITEM ~PLAT04~ #0 #0 #0 ~unstealable&undroppable~ ~ARMOR~
  REPLACE_CRE_ITEM ~POTN14~ #0 #0 #0 ~unstealable&undroppable~ ~qitem3~

COPY ~DarkHorizons/cre/CMSEC14A.CRE~ ~override~
  SAY NAME1 @738
  SAY NAME2 @738
  REPLACE_CRE_ITEM ~PLAT04~ #0 #0 #0 ~unstealable&undroppable~ ~ARMOR~
  REPLACE_CRE_ITEM ~POTN14~ #0 #0 #0 ~unstealable&undroppable~ ~qitem3~

COPY ~DarkHorizons/cre/CMSEC14B.CRE~ ~override~
  SAY NAME1 @738
  SAY NAME2 @738
  REPLACE_CRE_ITEM ~PLAT07~ #0 #0 #0 ~unstealable&undroppable~ ~ARMOR~
  REPLACE_CRE_ITEM ~POTN14~ #0 #0 #0 ~unstealable&undroppable~ ~qitem3~

COPY ~DarkHorizons/cre/CMSEC15.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737
  REPLACE_CRE_ITEM ~CHAN05~ #0 #0 #0 ~unstealable&undroppable~ ~ARMOR~
  REPLACE_CRE_ITEM ~AX1H06~ #0 #0 #0 ~unstealable&undroppable~ ~WEAPON2~

COPY ~DarkHorizons/cre/CMSEC16.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737
  REPLACE_CRE_ITEM ~LEAT02~ #0 #0 #0 ~unstealable&undroppable~ ~ARMOR~
  REPLACE_CRE_ITEM ~WAND11~ #0 #0 #0 ~unstealable&undroppable~ ~qitem2~

COPY ~DarkHorizons/cre/CMSEC17.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC18.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC19.CRE~ ~override~
  SAY NAME1 @738
  SAY NAME2 @738
  REPLACE_CRE_ITEM ~PLAT04~ #0 #0 #0 ~unstealable&undroppable~ ~ARMOR~
  REPLACE_CRE_ITEM ~SW2H02~ #0 #0 #0 ~unstealable&undroppable~ ~WEAPON2~
  REPLACE_CRE_ITEM ~BOW04~ #0 #0 #0 ~unstealable&undroppable~ ~WEAPON1~
  REPLACE_CRE_ITEM ~POTN14~ #0 #0 #0 ~unstealable&undroppable~ ~qitem3~

COPY ~DarkHorizons/cre/CMSEC20.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737
  REPLACE_CRE_ITEM ~PLAT01~ #0 #0 #0 ~unstealable&undroppable~ ~ARMOR~

COPY ~DarkHorizons/cre/CMSEC20A.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737
  REPLACE_CRE_ITEM ~PLAT01~ #0 #0 #0 ~unstealable&undroppable~ ~ARMOR~

COPY ~DarkHorizons/cre/CMSEC21.CRE~ ~override~
  SAY NAME1 @739
  SAY NAME2 @739
  REMOVE_CRE_ITEM ~MISC97~ ~inv2~

 COPY ~DarkHorizons/cre/CMSEC22.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC23.CRE~ ~override~
  SAY NAME1 @737
  SAY NAME2 @737

COPY ~DarkHorizons/cre/CMSEC24.CRE~ ~override~
  SAY NAME1 @738
  SAY NAME2 @738
  REPLACE_CRE_ITEM ~PLAT04~ #0 #0 #0 ~unstealable&undroppable~ ~ARMOR~
  REPLACE_CRE_ITEM ~SW1H05~ #0 #0 #0 ~unstealable&undroppable~ ~WEAPON2~
  REPLACE_CRE_ITEM ~BOW02~ #0 #0 #0 ~unstealable&undroppable~ ~WEAPON1~
  REPLACE_CRE_ITEM ~POTN14~ #0 #0 #0 ~unstealable&undroppable~ ~qitem3~

COPY ~DarkHorizons/cre/CMSEC25.CRE~ ~override~
  SAY NAME1 @738
  SAY NAME2 @738
  REPLACE_CRE_ITEM ~PLAT04~ #0 #0 #0 ~unstealable&undroppable~ ~ARMOR~
  REPLACE_CRE_ITEM ~SW1H05~ #0 #0 #0 ~unstealable&undroppable~ ~WEAPON2~
  REPLACE_CRE_ITEM ~BOW02~ #0 #0 #0 ~unstealable&undroppable~ ~WEAPON1~
  REPLACE_CRE_ITEM ~POTN14~ #0 #0 #0 ~unstealable&undroppable~ ~qitem3~

COPY ~DarkHorizons/cre/CMSKE01.CRE~ ~override~
  SAY NAME1 @740
  SAY NAME2 @740

COPY ~DarkHorizons/cre/CMSKE02.CRE~ ~override~
  SAY NAME1 @740
  SAY NAME2 @740

COPY ~DarkHorizons/cre/CMSKE03.CRE~ ~override~
  SAY NAME1 @740
  SAY NAME2 @740

COPY ~DarkHorizons/cre/CMSKE04.CRE~ ~override~
  SAY NAME1 @740
  SAY NAME2 @740

COPY ~DarkHorizons/cre/CMSKEL01.CRE~ ~override~
  SAY NAME1 @741
  SAY NAME2 @741
  REPLACE_CRE_ITEM ~BRAC07~ #0 #0 #0 ~unstealable&undroppable~ ~WEAPON1~

COPY ~DarkHorizons/cre/CMSKEL02.CRE~ ~override~
  SAY NAME1 @741
  SAY NAME2 @741
  REPLACE_CRE_ITEM ~BRAC07~ #0 #0 #0 ~unstealable&undroppable~ ~WEAPON1~

COPY ~DarkHorizons/cre/CMSKEL03.CRE~ ~override~
  SAY NAME1 @742
  SAY NAME2 @742

COPY ~DarkHorizons/cre/CMSKEL04.CRE~ ~override~
  SAY NAME1 @742
  SAY NAME2 @742

COPY ~DarkHorizons/cre/CMWYBA.CRE~ ~override~
  SAY NAME1 @743
  SAY NAME2 @743

COPY ~DarkHorizons/cre/CMWYBI1.CRE~ ~override~
  SAY NAME1 @744
  SAY NAME2 @744

COPY ~DarkHorizons/cre/CMWYBI2.CRE~ ~override~
  SAY NAME1 @745
  SAY NAME2 @745

/*    --------------------------- Version 2.00 creatures-----------------      */

COPY ~DarkHorizons/cre/CMBOU08.CRE~ ~override~
  SAY NAME1 @791
  SAY NAME2 @791

COPY ~DarkHorizons/cre/CMBOU09.CRE~ ~override~
  SAY NAME1 @792
  SAY NAME2 @792

COPY ~DarkHorizons/cre/CMBOU10.CRE~ ~override~
  SAY NAME1 @793
  SAY NAME2 @793

COPY ~DarkHorizons/cre/CMBOU11.CRE~ ~override~
  SAY NAME1 @794
  SAY NAME2 @794

COPY ~DarkHorizons/cre/CMRWIZ01.CRE~ ~override~
  SAY NAME1 @795
  SAY NAME2 @795

COPY ~DarkHorizons/cre/CMRWIZ02.CRE~ ~override~
  SAY NAME1 @796
  SAY NAME2 @796

COPY ~DarkHorizons/cre/CMRWIZ03.CRE~ ~override~
  SAY NAME1 @797
  SAY NAME2 @797

COPY ~DarkHorizons/cre/CMGNOL03.CRE~ ~override~
  SAY NAME1 @798
  SAY NAME2 @798

COPY ~DarkHorizons/cre/CMGNOL04.CRE~ ~override~
  SAY NAME1 @799
  SAY NAME2 @799

COPY ~DarkHorizons/cre/CMELF01.CRE~ ~override~
  SAY NAME1 @800
  SAY NAME2 @800

COPY ~DarkHorizons/cre/CMELF02.CRE~ ~override~
  SAY NAME1 @801
  SAY NAME2 @801

COPY ~DarkHorizons/cre/CMELF03.CRE~ ~override~
  SAY NAME1 @802
  SAY NAME2 @802

COPY ~DarkHorizons/cre/CMELF04.CRE~ ~override~
  SAY NAME1 @802
  SAY NAME2 @802

COPY ~DarkHorizons/cre/CMELF05.CRE~ ~override~
  SAY NAME1 @802
  SAY NAME2 @802

COPY ~DarkHorizons/cre/CMMERC03.CRE~ ~override~
  SAY NAME1 @803
  SAY NAME2 @803

COPY ~DarkHorizons/cre/CMMERC04.CRE~ ~override~
  SAY NAME1 @803
  SAY NAME2 @803
  WRITE_LONG 0x19c (BNOT 0x0) // DIALOG_DEFAULT

COPY ~DarkHorizons/cre/CMMERC05.CRE~ ~override~
  SAY NAME1 @840
  SAY NAME2 @840

COPY ~DarkHorizons/cre/CMMERC06.CRE~ ~override~
  SAY NAME1 @804
  SAY NAME2 @804

COPY ~DarkHorizons/cre/CM2300A1.CRE~ ~override~
  SAY NAME1 @805
  SAY NAME2 @805

COPY ~DarkHorizons/cre/CM2300A2.CRE~ ~override~
  SAY NAME1 @805
  SAY NAME2 @805

COPY ~DarkHorizons/cre/CM2300A3.CRE~ ~override~
  SAY NAME1 @805
  SAY NAME2 @805

COPY ~DarkHorizons/cre/CM330001.CRE~ ~override~
  SAY NAME1 @806
  SAY NAME2 @806

COPY ~DarkHorizons/cre/CM330002.CRE~ ~override~
  SAY NAME1 @806
  SAY NAME2 @806

COPY ~DarkHorizons/cre/CM330003.CRE~ ~override~
  SAY NAME1 @806
  SAY NAME2 @806

COPY ~DarkHorizons/cre/CM330004.CRE~ ~override~
  SAY NAME1 @806
  SAY NAME2 @806

COPY ~DarkHorizons/cre/CM330005.CRE~ ~override~
  SAY NAME1 @807
  SAY NAME2 @807

COPY ~DarkHorizons/cre/CM330006.CRE~ ~override~
  SAY NAME1 @807
  SAY NAME2 @807

COPY ~DarkHorizons/cre/CM330007.CRE~ ~override~
  SAY NAME1 @808
  SAY NAME2 @808

COPY ~DarkHorizons/cre/CM330008.CRE~ ~override~
  SAY NAME1 @808
  SAY NAME2 @808

/*  Stores */

COPY    ~DarkHorizons/stores/magnus01.sto~     ~override/magnus01.sto~
  SAY NAME2 @746

COPY    ~DarkHorizons/stores/mathoren.sto~     ~override/mathoren.sto~
  SAY NAME2 @747

COPY    ~DarkHorizons/stores/cmjewel.sto~     ~override/cmjewel.sto~
  SAY NAME2 @748

COPY    ~DarkHorizons/stores/cmkier.sto~     ~override/cmkier.sto~
	SAY NAME2 @749
	REPLACE_TEXTUALLY ~SCRL1V~ ~%SCRL1%~ (8)



COPY    ~DarkHorizons/stores/cmfood1.sto~     ~override/cmfood1.sto~
  SAY NAME2 @682

COPY    ~DarkHorizons/stores/cmmystr.sto~     ~override/cmmystr.sto~
  SAY NAME2 @750

COPY_EXISTING ~%STO0703%.sto~ ~override~
  ADD_STORE_ITEM ~cmclck02~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~cmstaf01~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~mabrac02~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~maclck01~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~cmheal1~ #1 #0 #0 ~IDENTIFIED~ #100

COPY_EXISTING ~%ulgoth%.sto~ ~override~
  ADD_STORE_ITEM ~maax1h02~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~macmda01~ #0 #0 #0 ~IDENTIFIED~ #1
  ADD_STORE_ITEM ~macmxb01~ #0 #0 #0 ~IDENTIFIED~ #10
  ADD_STORE_ITEM ~maarow01~ #40 #0 #0 ~IDENTIFIED~ #10
  ADD_STORE_ITEM ~mabull01~ #40 #0 #0 ~IDENTIFIED~ #100

/*  -------------------------- New stores in 200 ------------  */

COPY    ~DarkHorizons/%StoresFolder%/CMBAG01.sto~     ~override~
  SAY NAME2 @810

COPY    ~DarkHorizons/%StoresFolder%/CMBAG03.sto~     ~override~
  SAY NAME2 @812

COPY    ~DarkHorizons/%StoresFolder%/CMBAG04.sto~     ~override~
  SAY NAME2 @814

COPY    ~DarkHorizons/%StoresFolder%/CMBAG05.sto~     ~override~
  SAY NAME2 @816

COPY    ~DarkHorizons/%StoresFolder%/CMBAG06.sto~     ~override~
  SAY NAME2 @818

COPY    ~DarkHorizons/stores/CMMERC03.sto~     ~override~
  SAY NAME2 @841

COPY    ~DarkHorizons/stores/CMMERC04.sto~     ~override~
  SAY NAME2 @842

COPY    ~DarkHorizons/stores/CMMERC05.sto~     ~override~
  SAY NAME2 @843

COPY    ~DarkHorizons/%StoresFolder%/CMMERC06.sto~     ~override~
  SAY NAME2 @819


/* ----------------------- Tutu Specifics ------------------------ */

ACTION_IF GAME_IS ~tutu tutu_totsc~ THEN BEGIN
  COPY ~DarkHorizons/Tutu/cre/SKELET02.CRE~ ~override~
END

/* ------------------------ BGT Specifics ------------------------ */
ACTION_IF (GAME_IS ~BGT~) AND (NOT FILE_EXISTS_IN_GAME ~SCRL1R.itm~) THEN BEGIN
  COPY ~DarkHorizons/BGT/additems/SCRL1R.ITM~ ~override~
    SAY NAME1 @844
    SAY NAME2 @844
    SAY UNIDENTIFIED_DESC @845
    SAY DESC @845

  COPY ~DarkHorizons/BGT/additems/SPWI315.SPL~ ~override~
    SAY NAME1 @844
    SAY NAME2 @844
    SAY UNIDENTIFIED_DESC @845
    SAY DESC @845
END

ACTION_IF (GAME_IS ~BGT~) AND (NOT FILE_EXISTS_IN_GAME ~CSTAF06.bam~) THEN BEGIN
  COPY ~DarkHorizons/BGT/additems/CSTAF06.bam~ ~override~
END

ACTION_IF (GAME_IS ~BGT~) AND (NOT FILE_EXISTS_IN_GAME ~CSLNG03.bam~) THEN BEGIN
  COPY ~DarkHorizons/BGT/additems/CSLNG03.bam~ ~override~
END

ACTION_IF (GAME_IS ~BGT~) AND (NOT FILE_EXISTS_IN_GAME ~CSHLD19.BAM~) THEN BEGIN
  COPY ~DarkHorizons/BGT/additems/CSHLD19.BAM~ ~override~
END

ACTION_IF (GAME_IS ~BGT~) THEN BEGIN
  COPY_EXISTING ~AR8602.tis~ ~override/CM3373.tis~
  AT_INTERACTIVE_EXIT ~DarkHorizons/BGT/Install.bat~
  AT_INTERACTIVE_UNINSTALL ~DarkHorizons/BGT/UnInstall.bat~
END

/* ----------------------- BGEE Exclusives ------------------------ */

ACTION_IF GAME_IS ~bgee eet~ THEN BEGIN

COPY ~DarkHorizons/items/cmtck01.itm~   ~override/cmtck01.itm~
SAY NAME1 @112
SAY NAME2 @902
SAY UNIDENTIFIED_DESC @114
SAY DESC @903

COPY ~DarkHorizons/items/cmtbow01.itm~   ~override/cmtbow01.itm~
SAY NAME1 @248
SAY NAME2 @904
SAY UNIDENTIFIED_DESC @250
SAY DESC @905
PRINT ~Item restricted to Morwen for EE~
OUTER_SET cmt_bow01 = RESOLVE_STR_REF (@911)
OUTER_SET use_her = RESOLVE_STR_REF (@973)
APPEND ~ITEM_USE.2DA~ ~cmtbow01   CMTMORW      %cmt_bow01%      2           %use_her%~ UNLESS ~cmtbow01~

COPY ~DarkHorizons/items/cmtbrc01.itm~   ~override/cmtbrc01.itm~
SAY NAME1 @129
SAY NAME2 @906
SAY UNIDENTIFIED_DESC @131
SAY DESC @907
PRINT ~Item restricted to Morwen for EE~
OUTER_SET cmt_brc01 = RESOLVE_STR_REF (@911)
OUTER_SET use_her = RESOLVE_STR_REF (@973)
APPEND ~ITEM_USE.2DA~ ~cmtbrc01   CMTMORW      %cmt_brc01%      2           %use_her%~ UNLESS ~cmtbrc01~

COPY ~DarkHorizons/items/cmtlea01.itm~   ~override/cmtlea01.itm~
SAY NAME1 @18
SAY NAME2 @908
SAY UNIDENTIFIED_DESC @20
SAY DESC @909
PRINT ~Item restricted to Morwen for EE~
OUTER_SET cmt_lea01 = RESOLVE_STR_REF (@911)
OUTER_SET use_her = RESOLVE_STR_REF (@973)
APPEND ~ITEM_USE.2DA~ ~cmtlea01   CMTMORW      %cmt_lea01%      2           %use_her%~ UNLESS ~cmtlea01~


COPY ~DarkHorizons/cre/CMTNIKIT.cre~ ~override~
  SAY NAME1 @910 /* Nikita */
  SAY NAME2 @910 /* Nikita */
  SAY INITIAL_MEETING  @911 /* I see. */
  SAY MORALE   @912 /* We can't win this. */
  WRITE_LONG HAPPY    (0 - 1)
  WRITE_LONG UNHAPPY_ANNOYED  (0 - 1)
  WRITE_LONG UNHAPPY_SERIOUS  (0 - 1)
  WRITE_LONG UNHAPPY_BREAKING  (0 - 1)
  SAY LEADER  @914 /* Watch my back. */
  SAY TIRED  @915 /* We should rest soon. I'm dying to get out of these clothes. */
  SAY BORED  @916 /* I didn't come all of this way to die of boredom. */
  SAY BATTLE_CRY1   @917 /* Lets spill some blood. */
  SAY BATTLE_CRY2   @918 /* You wanna taste of this? */
  SAY BATTLE_CRY3  @919 /* Are you ready for me? */
  SAY BATTLE_CRY4  @920 /* Any last words? */
  SAY BATTLE_CRY5  @921 /* You're gonna bleed. */
  SAY DAMAGE    @922 /* Ughh */
  SAY DYING    @923 /* Dead */
  SAY HURT     @924 /* I feel so cold. */
  WRITE_LONG AREA_FOREST    (0 - 1)
  WRITE_LONG AREA_CITY      (0 - 1)
  WRITE_LONG AREA_DUNGEON   (0 - 1)
  WRITE_LONG AREA_DAY     (0 - 1)
  WRITE_LONG AREA_NIGHT   (0 - 1)
  SAY SELECT_COMMON1   @925 /* Yes? */
  SAY SELECT_COMMON2    @926 /* I'm here. */
  SAY SELECT_COMMON3   @927 /* You want me? */
  SAY SELECT_COMMON4   @928 /* Ready and willing. */
  WRITE_LONG SELECT_COMMON5   (0 - 1)
  WRITE_LONG SELECT_COMMON6   (0 - 1)
  SAY SELECT_ACTION1   @929 /* Right. */
  SAY SELECT_ACTION2   @930 /* Very well. */
  SAY SELECT_ACTION3   @931 /* Yes? */
  SAY SELECT_ACTION4   @932 /* Whatever you say. */
  WRITE_LONG SELECT_ACTION5    (0 - 1)
  WRITE_LONG SELECT_ACTION6    (0 - 1)
  WRITE_LONG SELECT_ACTION7    (0 - 1)
  SAY SELECT_RARE1     @933 /* I'd kill for a hot bath right about now. */
  SAY SELECT_RARE2      @934 /* Be careful where you point that thing. */
  SAY CRITICAL_HIT       @921 /* You're gonna bleed. */
  SAY CRITICAL_MISS      @935 /* Argh. */
  WRITE_LONG TARGET_IMMUNE    (0 - 1)
  SAY INVENTORY_FULL   @936 /* Don't expect me to carry the corpse back into town. */
  SAY PICKED_POCKET    @937 /* Done */
  SAY HIDDEN_IN_SHADOWS  @937 /* Done */
  WRITE_LONG SPELL_DISRUPTED   (0 - 1)
  WRITE_LONG SET_A_TRAP    (0 - 1)
  SAY BIO @938 /* NIKITA's past is something that she keeps to herself. From what you do know is that she was an orphan for a time until she was brought into Section in her late teens. They trained her to be a charismatic assassin who killed evil individuals. All of this was done for the greater good. But over time Section became corrupt and started to mirror the evil they were fighting. Nikita was liberated from Section when you destroyed the organization. */
  WRITE_ASCII 0x280 ~cmnikita~ (8) // Script name / Death variable

COPY ~DarkHorizons/cre/CMTTHOR.cre~ ~override~
  SAY NAME1 @939 /* Thorin */
  SAY NAME2 @939 /* Thorin */
  SAY INITIAL_MEETING  @940 /* At last the mighty adventurer stands before me. To what do I owe this honor? */
  SAY MORALE   @941 /* It's no use, flee! */
  WRITE_LONG HAPPY    (0 - 1)
  SAY UNHAPPY_ANNOYED  @942 /* Damn your eyes! */
  SAY UNHAPPY_SERIOUS  @943 /* I hope you choke on that thing! */
  SAY UNHAPPY_BREAKING  @943 /* I hope you choke on that thing! */
  SAY LEADER  @944 /* When all else fails, put the dwarf up front. */
  SAY TIRED  @945 /* I'll be needin' rest soon. */
  SAY BORED  @946 /* What, you expect our enemies to come to us?. */
  SAY BATTLE_CRY1   @947 /* Grrrrr! */
  SAY BATTLE_CRY2   @948 /* I spit at you. */
  SAY BATTLE_CRY3  @949 /* Come 'ere you wretch! */
  SAY BATTLE_CRY4  @950 /* Die! */
  SAY BATTLE_CRY5  @951 /* I'll wash me beard in yer blood! */
  SAY DAMAGE    @952 /* Is that the best that you can do? */
  SAY DYING    @953 /* Ugghh! */
  SAY HURT     @954 /* Aghh! I'm needin' a healer!. */
  WRITE_LONG AREA_FOREST    (0 - 1)
  WRITE_LONG AREA_CITY      (0 - 1)
  WRITE_LONG AREA_DUNGEON   (0 - 1)
  WRITE_LONG AREA_DAY     (0 - 1)
  WRITE_LONG AREA_NIGHT   (0 - 1)
  SAY SELECT_COMMON1   @955 /* Aye? */
  SAY SELECT_COMMON2    @956 /* What? */
  SAY SELECT_COMMON3   @957 /* I'm here. */
  SAY SELECT_COMMON4   @958 /* Hmm? */
  SAY SELECT_COMMON5   @959 /* Ready. */
  SAY SELECT_COMMON6   @960 /* I hear ya. */
  SAY SELECT_ACTION1   @961 /* Done. */
  SAY SELECT_ACTION2   @962 /* Right then. */
  SAY SELECT_ACTION3   @963 /* Watch me go. */
  SAY SELECT_ACTION4   @964 /* Not a problem. */
  SAY SELECT_ACTION5    @965 /* Aye. */
  SAY SELECT_ACTION6    @966 /* Is that all? */
  SAY SELECT_ACTION7    @967 /* Easy as goblin pie. */
  SAY SELECT_RARE1     @968 /* You really have no clue, do ye? */
  SAY SELECT_RARE2      @969 /* That's right keep pushing it. */
  SAY CRITICAL_HIT       @970 /* Die */
  SAY CRITICAL_MISS      @971 /* Ughh. */
  SAY TARGET_IMMUNE    @968 /* You really have no clue, do ye? */
  SAY INVENTORY_FULL   @943 /* I hope you choke on that thing! */
  WRITE_LONG PICKED_POCKET    (0 - 1)
  WRITE_LONG HIDDEN_IN_SHADOWS  (0 - 1)
  WRITE_LONG SPELL_DISRUPTED   (0 - 1)
  WRITE_LONG SET_A_TRAP    (0 - 1)
  SAY BIO @972 /* When asked about his past, THORIN says he's from the famous Stoneblade clan who were once Durlag's captian of the guard for many years. His grandfather was the last to serve Durlag before bad things happen to Durlag and his people. He would like to travel with the party to Durlag's Tower to retrieve some family heirlooms that may still be there and see what happened to his grandfather and the famous Durlag Trollkiller. */
  WRITE_ASCII 0x280 ~CMTTHOR~ (8) // Script name / Death variable

COPY ~DarkHorizons/cre/CMTMORW.cre~ ~override~
  SAY NAME1 @973 /* Morwen */
  SAY NAME2 @973 /* Morwen */
  SAY INITIAL_MEETING  @911 /* I see. */
  SAY MORALE   @912 /* We can't win this. */
  WRITE_LONG HAPPY    (0 - 1)
  WRITE_LONG UNHAPPY_ANNOYED  (0 - 1)
  WRITE_LONG UNHAPPY_SERIOUS  (0 - 1)
  WRITE_LONG UNHAPPY_BREAKING  (0 - 1)
  SAY LEADER  @914 /* Watch my back. */
  SAY TIRED  @915 /* We should rest soon. I'm dying to get out of these clothes. */
  SAY BORED  @916 /* I didn't come all of this way to die of boredom. */
  SAY BATTLE_CRY1   @917 /* Lets spill some blood. */
  SAY BATTLE_CRY2   @918 /* You wanna taste of this? */
  SAY BATTLE_CRY3  @919 /* Are you ready for me? */
  SAY BATTLE_CRY4  @920 /* Any last words? */
  SAY BATTLE_CRY5  @921 /* You're gonna bleed. */
  SAY DAMAGE    @922 /* Ughh */
  SAY DYING    @923 /* Dead */
  SAY HURT     @924 /* I feel so cold. */
  WRITE_LONG AREA_FOREST    (0 - 1)
  WRITE_LONG AREA_CITY      (0 - 1)
  WRITE_LONG AREA_DUNGEON   (0 - 1)
  WRITE_LONG AREA_DAY     (0 - 1)
  WRITE_LONG AREA_NIGHT   (0 - 1)
  SAY SELECT_COMMON1   @925 /* Yes? */
  SAY SELECT_COMMON2    @926 /* I'm here. */
  SAY SELECT_COMMON3   @927 /* You want me? */
  SAY SELECT_COMMON4   @928 /* Ready and willing. */
  WRITE_LONG SELECT_COMMON5   (0 - 1)
  WRITE_LONG SELECT_COMMON6   (0 - 1)
  SAY SELECT_ACTION1   @929 /* Right. */
  SAY SELECT_ACTION2   @930 /* Very well. */
  SAY SELECT_ACTION3   @931 /* Yes? */
  SAY SELECT_ACTION4   @932 /* Whatever you say. */
  WRITE_LONG SELECT_ACTION5    (0 - 1)
  WRITE_LONG SELECT_ACTION6    (0 - 1)
  WRITE_LONG SELECT_ACTION7    (0 - 1)
  SAY SELECT_RARE1     @933 /* I'd kill for a hot bath right about now. */
  SAY SELECT_RARE2      @934 /* Be careful where you point that thing. */
  SAY CRITICAL_HIT       @921 /* You're gonna bleed. */
  SAY CRITICAL_MISS      @935 /* Argh. */
  WRITE_LONG TARGET_IMMUNE    (0 - 1)
  SAY INVENTORY_FULL   @936 /* Don't expect me to carry the corpse back into town. */
  SAY PICKED_POCKET    @937 /* Done */
  SAY HIDDEN_IN_SHADOWS  @937 /* Done */
  WRITE_LONG SPELL_DISRUPTED   (0 - 1)
  WRITE_LONG SET_A_TRAP    (0 - 1)
  SAY BIO @974 /* When asked about her past, MORWEN says she came from a well to do family from the city of Neverwinter. She got her first taste of the epic poems and stories from the northern Skald bards when her family visited the Icewind Dale region when she was young. Ever since then she has been obsessed with their epic tales and adventures. She wished to learn from the Skald bards but they rarely ever came to Neverwinter, until the day that Dale the Bard made a stop there. She first saw him at one of the local pubs, singing his epic exploits in a song. She introduced herself to Dale and soon after he mentored Morwen in the Skald Bard skills as well as being an excellent archer. After learning these skills, she quickly grew bored of the uneventful Neverwinter high life and decided to travel south to the Sword Coast region after she heard about the iron crisis. She traveled to Beregost to find someone who is seeking adventure like herself. */
  WRITE_ASCII 0x280 ~CMTMORW~ (8) // Script name / Death variable

// Appends
ACTION_IF (GAME_IS ~eet~) BEGIN
  PRINT ~              ~
  PRINT ~APPEND pdialog.2da for EET~
  PRINT ~
              ~

  APPEND ~pdialog.2da~ ~CMTNIK CMTNIKP CMTNIKJ CMTNIKD  ****  ****  ****  ****~
    UNLESS ~cmtnik~

  APPEND ~pdialog.2da~ ~CMTTHOR CMTTHORP CMTTHORJ CMTTHORD  ****  ****  ****  ****~
    UNLESS ~cmtthor~

  APPEND ~pdialog.2da~ ~CMTMORW CMTMORWP CMTMORWJ CMTMORWD  ****  ****  ****  ****~
    UNLESS ~cmtmorw~

END ELSE BEGIN // bgee bgt in this case (other exemple in ChaosKnight)
  PRINT ~              ~
  PRINT ~APPEND pdialog.2da for BGEE or BGT~
  PRINT ~
              ~

  APPEND ~pdialog.2da~ ~CMTNIK CMTNIKP CMTNIKJ CMTNIKD~
    UNLESS ~cmtnik~

  APPEND ~pdialog.2da~ ~CMTTHOR CMTTHORP CMTTHORJ CMTTHORD~
    UNLESS ~cmtthor~

  APPEND ~pdialog.2da~ ~CMTMORW CMTMORWP CMTMORWJ CMTMORWD~
    UNLESS ~cmtmorw~
END

APPEND ~interdia.2da~ ~cmtnik BCMTNIK~
  UNLESS ~cmtnik~

APPEND ~interdia.2da~ ~cmtthor BCMTTHOR~
  UNLESS ~cmtthor~

APPEND ~interdia.2da~ ~cmtmorw BCMTMORW~
  UNLESS ~cmtmorw~

// Dialogs

COMPILE EVALUATE_BUFFER ~DarkHorizons/dlgs/cmtniki.d~

COMPILE EVALUATE_BUFFER ~DarkHorizons/dlgs/cmtthori.d~

COMPILE EVALUATE_BUFFER ~DarkHorizons/dlgs/cmtmorw.d~

// Scripts

COMPILE ~DarkHorizons/baf/cmtnikit.baf~

COMPILE ~DarkHorizons/baf/cmtthor.baf~

COMPILE ~DarkHorizons/baf/cmtmorw.baf~

// PVRZ

COPY ~DarkHorizons/PVRZ~ ~override~

END
